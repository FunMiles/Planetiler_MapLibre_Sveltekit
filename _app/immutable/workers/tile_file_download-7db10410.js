var hi=Object.defineProperty;var fi=(e,t,n)=>t in e?hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fn=(e,t,n)=>(fi(e,typeof t!="symbol"?t+"":t,n),n);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Er=Symbol("Comlink.proxy"),di=Symbol("Comlink.endpoint"),pi=Symbol("Comlink.releaseProxy"),dn=Symbol("Comlink.finalizer"),We=Symbol("Comlink.thrown"),Sr=e=>typeof e=="object"&&e!==null||typeof e=="function",mi={canHandle:e=>Sr(e)&&e[Er],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Vn(e,t),[n,[n]]},deserialize(e){return e.start(),bi(e)}},yi={canHandle:e=>Sr(e)&&We in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Cr=new Map([["proxy",mi],["throw",yi]]);function gi(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Vn(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(r){if(!r||!r.data)return;if(!gi(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:s,type:a,path:o}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(Ht);let g;try{const y=o.slice(0,-1).reduce((p,h)=>p[h],e),m=o.reduce((p,h)=>p[h],e);switch(a){case"GET":g=m;break;case"SET":y[o.slice(-1)[0]]=Ht(r.data.value),g=!0;break;case"APPLY":g=m.apply(y,u);break;case"CONSTRUCT":{const p=new m(...u);g=Ei(p)}break;case"ENDPOINT":{const{port1:p,port2:h}=new MessageChannel;Vn(e,h),g=xi(p,[p])}break;case"RELEASE":g=void 0;break;default:return}}catch(y){g={value:y,[We]:0}}Promise.resolve(g).catch(y=>({value:y,[We]:0})).then(y=>{const[m,p]=Qe(y);t.postMessage(Object.assign(Object.assign({},m),{id:s}),p),a==="RELEASE"&&(t.removeEventListener("message",i),Ar(t),dn in e&&typeof e[dn]=="function"&&e[dn]())}).catch(y=>{const[m,p]=Qe({value:new TypeError("Unserializable return value"),[We]:0});t.postMessage(Object.assign(Object.assign({},m),{id:s}),p)})}),t.start&&t.start()}function _i(e){return e.constructor.name==="MessagePort"}function Ar(e){_i(e)&&e.close()}function bi(e,t){return wn(e,[],t)}function Be(e){if(e)throw new Error("Proxy has been released and is not useable")}function Or(e){return ne(e,{type:"RELEASE"}).then(()=>{Ar(e)})}const Xe=new WeakMap,Je="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Xe.get(e)||0)-1;Xe.set(e,t),t===0&&Or(e)});function vi(e,t){const n=(Xe.get(t)||0)+1;Xe.set(t,n),Je&&Je.register(e,t,e)}function wi(e){Je&&Je.unregister(e)}function wn(e,t=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(s,a){if(Be(i),a===pi)return()=>{wi(r),Or(e),i=!0};if(a==="then"){if(t.length===0)return{then:()=>r};const o=ne(e,{type:"GET",path:t.map(u=>u.toString())}).then(Ht);return o.then.bind(o)}return wn(e,[...t,a])},set(s,a,o){Be(i);const[u,g]=Qe(o);return ne(e,{type:"SET",path:[...t,a].map(y=>y.toString()),value:u},g).then(Ht)},apply(s,a,o){Be(i);const u=t[t.length-1];if(u===di)return ne(e,{type:"ENDPOINT"}).then(Ht);if(u==="bind")return wn(e,t.slice(0,-1));const[g,y]=lr(o);return ne(e,{type:"APPLY",path:t.map(m=>m.toString()),argumentList:g},y).then(Ht)},construct(s,a){Be(i);const[o,u]=lr(a);return ne(e,{type:"CONSTRUCT",path:t.map(g=>g.toString()),argumentList:o},u).then(Ht)}});return vi(r,e),r}function ki(e){return Array.prototype.concat.apply([],e)}function lr(e){const t=e.map(Qe);return[t.map(n=>n[0]),ki(t.map(n=>n[1]))]}const Ir=new WeakMap;function xi(e,t){return Ir.set(e,t),e}function Ei(e){return Object.assign(e,{[Er]:!0})}function Qe(e){for(const[t,n]of Cr)if(n.canHandle(e)){const[i,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},r]}return[{type:"RAW",value:e},Ir.get(e)||[]]}function Ht(e){switch(e.type){case"HANDLER":return Cr.get(e.name).deserialize(e.value);case"RAW":return e.value}}function ne(e,t,n){return new Promise(i=>{const r=Si();e.addEventListener("message",function s(a){!a.data||!a.data.id||a.data.id!==r||(e.removeEventListener("message",s),i(a.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:r},t),n)})}function Si(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ci(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function De(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,r,s){function a(g,y){if(!r[g]){if(!i[g]){var m=typeof De=="function"&&De;if(!y&&m)return m(g,!0);if(o)return o(g,!0);var p=new Error("Cannot find module '"+g+"'");throw p.code="MODULE_NOT_FOUND",p}var h=r[g]={exports:{}};i[g][0].call(h.exports,function(v){var c=i[g][1][v];return a(c||v)},h,h.exports,n,i,r,s)}return r[g].exports}for(var o=typeof De=="function"&&De,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,i,r){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var g,y,m,p,h,v,c,b=[],d=0,_=u.length,k=_,C=s.getTypeOf(u)!=="string";d<u.length;)k=_-d,m=C?(g=u[d++],y=d<_?u[d++]:0,d<_?u[d++]:0):(g=u.charCodeAt(d++),y=d<_?u.charCodeAt(d++):0,d<_?u.charCodeAt(d++):0),p=g>>2,h=(3&g)<<4|y>>4,v=1<k?(15&y)<<2|m>>6:64,c=2<k?63&m:64,b.push(o.charAt(p)+o.charAt(h)+o.charAt(v)+o.charAt(c));return b.join("")},r.decode=function(u){var g,y,m,p,h,v,c=0,b=0,d="data:";if(u.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var _,k=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&k--,u.charAt(u.length-2)===o.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=a.uint8array?new Uint8Array(0|k):new Array(0|k);c<u.length;)g=o.indexOf(u.charAt(c++))<<2|(p=o.indexOf(u.charAt(c++)))>>4,y=(15&p)<<4|(h=o.indexOf(u.charAt(c++)))>>2,m=(3&h)<<6|(v=o.indexOf(u.charAt(c++))),_[b++]=g,h!==64&&(_[b++]=y),v!==64&&(_[b++]=m);return _}},{"./support":30,"./utils":32}],2:[function(n,i,r){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function g(y,m,p,h,v){this.compressedSize=y,this.uncompressedSize=m,this.crc32=p,this.compression=h,this.compressedContent=v}g.prototype={getContentWorker:function(){var y=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),m=this;return y.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(y,m,p){return y.pipe(new o).pipe(new u("uncompressedSize")).pipe(m.compressWorker(p)).pipe(new u("compressedSize")).withStreamInfo("compression",m)},i.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,r){var s=n("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,r){var s=n("./utils"),a=function(){for(var o,u=[],g=0;g<256;g++){o=g;for(var y=0;y<8;y++)o=1&o?3988292384^o>>>1:o>>>1;u[g]=o}return u}();i.exports=function(o,u){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(g,y,m,p){var h=a,v=p+m;g^=-1;for(var c=p;c<v;c++)g=g>>>8^h[255&(g^y[c])];return-1^g}(0|u,o,o.length,0):function(g,y,m,p){var h=a,v=p+m;g^=-1;for(var c=p;c<v;c++)g=g>>>8^h[255&(g^y.charCodeAt(c))];return-1^g}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(n,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(n,i,r){var s=null;s=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:s}},{lie:37}],7:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),u=n("./stream/GenericWorker"),g=s?"uint8array":"array";function y(m,p){u.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=p,this.meta={}}r.magic="\b\0",o.inherits(y,u),y.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(g,m.data),!1)},y.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(p){m.push({data:p,meta:m.meta})}},r.compressWorker=function(m){return new y("Deflate",m)},r.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,r){function s(h,v){var c,b="";for(c=0;c<v;c++)b+=String.fromCharCode(255&h),h>>>=8;return b}function a(h,v,c,b,d,_){var k,C,E=h.file,I=h.compression,A=_!==g.utf8encode,j=o.transformTo("string",_(E.name)),O=o.transformTo("string",g.utf8encode(E.name)),U=E.comment,H=o.transformTo("string",_(U)),S=o.transformTo("string",g.utf8encode(U)),R=O.length!==E.name.length,f=S.length!==U.length,F="",Q="",K="",rt=E.dir,W=E.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};v&&!c||(tt.crc32=h.crc32,tt.compressedSize=h.compressedSize,tt.uncompressedSize=h.uncompressedSize);var B=0;v&&(B|=8),A||!R&&!f||(B|=2048);var T=0,et=0;rt&&(T|=16),d==="UNIX"?(et=798,T|=function(G,ht){var gt=G;return G||(gt=ht?16893:33204),(65535&gt)<<16}(E.unixPermissions,rt)):(et=20,T|=function(G){return 63&(G||0)}(E.dosPermissions)),k=W.getUTCHours(),k<<=6,k|=W.getUTCMinutes(),k<<=5,k|=W.getUTCSeconds()/2,C=W.getUTCFullYear()-1980,C<<=4,C|=W.getUTCMonth()+1,C<<=5,C|=W.getUTCDate(),R&&(Q=s(1,1)+s(y(j),4)+O,F+="up"+s(Q.length,2)+Q),f&&(K=s(1,1)+s(y(H),4)+S,F+="uc"+s(K.length,2)+K);var V="";return V+=`
\0`,V+=s(B,2),V+=I.magic,V+=s(k,2),V+=s(C,2),V+=s(tt.crc32,4),V+=s(tt.compressedSize,4),V+=s(tt.uncompressedSize,4),V+=s(j.length,2),V+=s(F.length,2),{fileRecord:m.LOCAL_FILE_HEADER+V+j+F,dirRecord:m.CENTRAL_FILE_HEADER+s(et,2)+V+s(H.length,2)+"\0\0\0\0"+s(T,4)+s(b,4)+j+F+H}}var o=n("../utils"),u=n("../stream/GenericWorker"),g=n("../utf8"),y=n("../crc32"),m=n("../signature");function p(h,v,c,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=c,this.encodeFileName=b,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(p,u),p.prototype.push=function(h){var v=h.meta.percent||0,c=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,u.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:c?(v+100*(c-b-1))/c:100}}))},p.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var v=this.streamFiles&&!h.file.dir;if(v){var c=a(h,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(h){this.accumulate=!1;var v=this.streamFiles&&!h.file.dir,c=a(h,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),v)this.push({data:function(b){return m.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var h=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var c=this.bytesWritten-h,b=function(d,_,k,C,E){var I=o.transformTo("string",E(C));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(d,2)+s(d,2)+s(_,4)+s(k,4)+s(I.length,2)+I}(this.dirRecords.length,c,h,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(h){this._sources.push(h);var v=this;return h.on("data",function(c){v.processChunk(c)}),h.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),h.on("error",function(c){v.error(c)}),this},p.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(h){var v=this._sources;if(!u.prototype.error.call(this,h))return!1;for(var c=0;c<v.length;c++)try{v[c].error(h)}catch{}return!0},p.prototype.lock=function(){u.prototype.lock.call(this);for(var h=this._sources,v=0;v<h.length;v++)h[v].lock()},i.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,r){var s=n("../compressions"),a=n("./ZipFileWorker");r.generateWorker=function(o,u,g){var y=new a(u.streamFiles,g,u.platform,u.encodeFileName),m=0;try{o.forEach(function(p,h){m++;var v=function(_,k){var C=_||k,E=s[C];if(!E)throw new Error(C+" is not a valid compression method !");return E}(h.options.compression,u.compression),c=h.options.compressionOptions||u.compressionOptions||{},b=h.dir,d=h.date;h._compressWorker(v,c).withStreamInfo("file",{name:p,dir:b,date:d,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(y)}),y.entriesCount=m}catch(p){y.error(p)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,r){var s=n("./utils"),a=n("./external"),o=n("./utf8"),u=n("./zipEntries"),g=n("./stream/Crc32Probe"),y=n("./nodejsUtils");function m(p){return new a.Promise(function(h,v){var c=p.decompressed.getContentWorker().pipe(new g);c.on("error",function(b){v(b)}).on("end",function(){c.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}i.exports=function(p,h){var v=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),y.isNode&&y.isStream(p)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,h.optimizedBinaryString,h.base64).then(function(c){var b=new u(h);return b.load(c),b}).then(function(c){var b=[a.Promise.resolve(c)],d=c.files;if(h.checkCRC32)for(var _=0;_<d.length;_++)b.push(m(d[_]));return a.Promise.all(b)}).then(function(c){for(var b=c.shift(),d=b.files,_=0;_<d.length;_++){var k=d[_],C=k.fileNameStr,E=s.resolve(k.fileNameStr);v.file(E,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:h.createFolders}),k.dir||(v.file(E).unsafeOriginalName=C)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,r){var s=n("../utils"),a=n("../stream/GenericWorker");function o(u,g){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(g)}s.inherits(o,a),o.prototype._bindStream=function(u){var g=this;(this._stream=u).pause(),u.on("data",function(y){g.push({data:y,meta:{percent:0}})}).on("error",function(y){g.isPaused?this.generatedError=y:g.error(y)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,r){var s=n("readable-stream").Readable;function a(o,u,g){s.call(this,u),this._helper=o;var y=this;o.on("data",function(m,p){y.push(m)||y._helper.pause(),g&&g(p)}).on("error",function(m){y.emit("error",m)}).on("end",function(){y.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,i,r){function s(E,I,A){var j,O=o.getTypeOf(I),U=o.extend(A||{},y);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(E=d(E)),U.createFolders&&(j=b(E))&&_.call(this,j,!0);var H=O==="string"&&U.binary===!1&&U.base64===!1;A&&A.binary!==void 0||(U.binary=!H),(I instanceof m&&I.uncompressedSize===0||U.dir||!I||I.length===0)&&(U.base64=!1,U.binary=!0,I="",U.compression="STORE",O="string");var S=null;S=I instanceof m||I instanceof u?I:v.isNode&&v.isStream(I)?new c(E,I):o.prepareContent(E,I,U.binary,U.optimizedBinaryString,U.base64);var R=new p(E,S,U);this.files[E]=R}var a=n("./utf8"),o=n("./utils"),u=n("./stream/GenericWorker"),g=n("./stream/StreamHelper"),y=n("./defaults"),m=n("./compressedObject"),p=n("./zipObject"),h=n("./generate"),v=n("./nodejsUtils"),c=n("./nodejs/NodejsStreamInputAdapter"),b=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var I=E.lastIndexOf("/");return 0<I?E.substring(0,I):""},d=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},_=function(E,I){return I=I!==void 0?I:y.createFolders,E=d(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:I}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var I,A,j;for(I in this.files)j=this.files[I],(A=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&E(A,j)},filter:function(E){var I=[];return this.forEach(function(A,j){E(A,j)&&I.push(j)}),I},file:function(E,I,A){if(arguments.length!==1)return E=this.root+E,s.call(this,E,I,A),this;if(k(E)){var j=E;return this.filter(function(U,H){return!H.dir&&j.test(U)})}var O=this.files[this.root+E];return O&&!O.dir?O:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(O,U){return U.dir&&E.test(O)});var I=this.root+E,A=_.call(this,I),j=this.clone();return j.root=A.name,j},remove:function(E){E=this.root+E;var I=this.files[E];if(I||(E.slice(-1)!=="/"&&(E+="/"),I=this.files[E]),I&&!I.dir)delete this.files[E];else for(var A=this.filter(function(O,U){return U.name.slice(0,E.length)===E}),j=0;j<A.length;j++)delete this.files[A[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var I,A={};try{if((A=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");o.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var j=A.comment||this.comment||"";I=h.generateWorker(this,A,j)}catch(O){(I=new u("error")).error(O)}return new g(I,A.type||"string",A.mimeType)},generateAsync:function(E,I){return this.generateInternalStream(E).accumulate(I)},generateNodeStream:function(E,I){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(I)}};i.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,r){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,r){var s=n("./DataReader");function a(o){s.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),g=o.charCodeAt(1),y=o.charCodeAt(2),m=o.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===u&&this.data[p+1]===g&&this.data[p+2]===y&&this.data[p+3]===m)return p-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),g=o.charCodeAt(1),y=o.charCodeAt(2),m=o.charCodeAt(3),p=this.readData(4);return u===p[0]&&g===p[1]&&y===p[2]&&m===p[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,i,r){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,g=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)g=(g<<8)+this.byteAt(u);return this.index+=o,g},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(n,i,r){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,r){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,i,r){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,r){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),u=n("./StringReader"),g=n("./NodeBufferReader"),y=n("./Uint8ArrayReader");i.exports=function(m){var p=s.getTypeOf(m);return s.checkSupport(p),p!=="string"||a.uint8array?p==="nodebuffer"?new g(m):a.uint8array?new y(s.transformTo("uint8array",m)):new o(s.transformTo("array",m)):new u(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,r){var s=n("./GenericWorker"),a=n("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,r){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,r){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+u.data.length}a.prototype.processChunk.call(this,u)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,r){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(y){g.dataIsReady=!0,g.data=y,g.max=y&&y.length||0,g.type=s.getTypeOf(y),g.isPaused||g._tickAndRepeat()},function(y){g.error(y)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,g);break;case"uint8array":u=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":u=this.data.slice(this.index,g)}return this.index=g,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(n,i,r){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),u=n("../base64"),g=n("../support"),y=n("../external"),m=null;if(g.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,c){return new y.Promise(function(b,d){var _=[],k=v._internalType,C=v._outputType,E=v._mimeType;v.on("data",function(I,A){_.push(I),c&&c(A)}).on("error",function(I){_=[],d(I)}).on("end",function(){try{var I=function(A,j,O){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",j),O);case"base64":return u.encode(j);default:return s.transformTo(A,j)}}(C,function(A,j){var O,U=0,H=null,S=0;for(O=0;O<j.length;O++)S+=j[O].length;switch(A){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(H=new Uint8Array(S),O=0;O<j.length;O++)H.set(j[O],U),U+=j[O].length;return H;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+A+"'")}}(k,_),E);b(I)}catch(A){d(A)}_=[]}).resume()})}function h(v,c,b){var d=c;switch(c){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=c,this._mimeType=b,s.checkSupport(d),this._worker=v.pipe(new a(d)),v.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}h.prototype={accumulate:function(v){return p(this,v)},on:function(v,c){var b=this;return v==="data"?this._worker.on(v,function(d){c.call(b,d.data,d.meta)}):this._worker.on(v,function(){s.delay(c,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!n("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,r){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),u=n("./stream/GenericWorker"),g=new Array(256),y=0;y<256;y++)g[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;g[254]=g[254]=1;function m(){u.call(this,"utf-8 decode"),this.leftOver=null}function p(){u.call(this,"utf-8 encode")}r.utf8encode=function(h){return a.nodebuffer?o.newBufferFrom(h,"utf-8"):function(v){var c,b,d,_,k,C=v.length,E=0;for(_=0;_<C;_++)(64512&(b=v.charCodeAt(_)))==55296&&_+1<C&&(64512&(d=v.charCodeAt(_+1)))==56320&&(b=65536+(b-55296<<10)+(d-56320),_++),E+=b<128?1:b<2048?2:b<65536?3:4;for(c=a.uint8array?new Uint8Array(E):new Array(E),_=k=0;k<E;_++)(64512&(b=v.charCodeAt(_)))==55296&&_+1<C&&(64512&(d=v.charCodeAt(_+1)))==56320&&(b=65536+(b-55296<<10)+(d-56320),_++),b<128?c[k++]=b:(b<2048?c[k++]=192|b>>>6:(b<65536?c[k++]=224|b>>>12:(c[k++]=240|b>>>18,c[k++]=128|b>>>12&63),c[k++]=128|b>>>6&63),c[k++]=128|63&b);return c}(h)},r.utf8decode=function(h){return a.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):function(v){var c,b,d,_,k=v.length,C=new Array(2*k);for(c=b=0;c<k;)if((d=v[c++])<128)C[b++]=d;else if(4<(_=g[d]))C[b++]=65533,c+=_-1;else{for(d&=_===2?31:_===3?15:7;1<_&&c<k;)d=d<<6|63&v[c++],_--;1<_?C[b++]=65533:d<65536?C[b++]=d:(d-=65536,C[b++]=55296|d>>10&1023,C[b++]=56320|1023&d)}return C.length!==b&&(C.subarray?C=C.subarray(0,b):C.length=b),s.applyFromCharCode(C)}(h=s.transformTo(a.uint8array?"uint8array":"array",h))},s.inherits(m,u),m.prototype.processChunk=function(h){var v=s.transformTo(a.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var c=v;(v=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),v.set(c,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(_,k){var C;for((k=k||_.length)>_.length&&(k=_.length),C=k-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?k:C+g[_[C]]>k?C:k}(v),d=v;b!==v.length&&(a.uint8array?(d=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(d=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:r.utf8decode(d),meta:h.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=m,s.inherits(p,u),p.prototype.processChunk=function(h){this.push({data:r.utf8encode(h.data),meta:h.meta})},r.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,r){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),u=n("./external");function g(c){return c}function y(c,b){for(var d=0;d<c.length;++d)b[d]=255&c.charCodeAt(d);return b}n("setimmediate"),r.newBlob=function(c,b){r.checkSupport("blob");try{return new Blob([c],{type:b})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(c),d.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(c,b,d){var _=[],k=0,C=c.length;if(C<=d)return String.fromCharCode.apply(null,c);for(;k<C;)b==="array"||b==="nodebuffer"?_.push(String.fromCharCode.apply(null,c.slice(k,Math.min(k+d,C)))):_.push(String.fromCharCode.apply(null,c.subarray(k,Math.min(k+d,C)))),k+=d;return _.join("")},stringifyByChar:function(c){for(var b="",d=0;d<c.length;d++)b+=String.fromCharCode(c[d]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function p(c){var b=65536,d=r.getTypeOf(c),_=!0;if(d==="uint8array"?_=m.applyCanBeUsed.uint8array:d==="nodebuffer"&&(_=m.applyCanBeUsed.nodebuffer),_)for(;1<b;)try{return m.stringifyByChunk(c,d,b)}catch{b=Math.floor(b/2)}return m.stringifyByChar(c)}function h(c,b){for(var d=0;d<c.length;d++)b[d]=c[d];return b}r.applyFromCharCode=p;var v={};v.string={string:g,array:function(c){return y(c,new Array(c.length))},arraybuffer:function(c){return v.string.uint8array(c).buffer},uint8array:function(c){return y(c,new Uint8Array(c.length))},nodebuffer:function(c){return y(c,o.allocBuffer(c.length))}},v.array={string:p,array:g,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return o.newBufferFrom(c)}},v.arraybuffer={string:function(c){return p(new Uint8Array(c))},array:function(c){return h(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:g,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return o.newBufferFrom(new Uint8Array(c))}},v.uint8array={string:p,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:g,nodebuffer:function(c){return o.newBufferFrom(c)}},v.nodebuffer={string:p,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return v.nodebuffer.uint8array(c).buffer},uint8array:function(c){return h(c,new Uint8Array(c.length))},nodebuffer:g},r.transformTo=function(c,b){if(b=b||"",!c)return b;r.checkSupport(c);var d=r.getTypeOf(b);return v[d][c](b)},r.resolve=function(c){for(var b=c.split("/"),d=[],_=0;_<b.length;_++){var k=b[_];k==="."||k===""&&_!==0&&_!==b.length-1||(k===".."?d.pop():d.push(k))}return d.join("/")},r.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(c)?"nodebuffer":s.uint8array&&c instanceof Uint8Array?"uint8array":s.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(c){if(!s[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(c){var b,d,_="";for(d=0;d<(c||"").length;d++)_+="\\x"+((b=c.charCodeAt(d))<16?"0":"")+b.toString(16).toUpperCase();return _},r.delay=function(c,b,d){setImmediate(function(){c.apply(d||null,b||[])})},r.inherits=function(c,b){function d(){}d.prototype=b.prototype,c.prototype=new d},r.extend=function(){var c,b,d={};for(c=0;c<arguments.length;c++)for(b in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],b)&&d[b]===void 0&&(d[b]=arguments[c][b]);return d},r.prepareContent=function(c,b,d,_,k){return u.Promise.resolve(b).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(E,I){var A=new FileReader;A.onload=function(j){E(j.target.result)},A.onerror=function(j){I(j.target.error)},A.readAsArrayBuffer(C)}):C}).then(function(C){var E=r.getTypeOf(C);return E?(E==="arraybuffer"?C=r.transformTo("uint8array",C):E==="string"&&(k?C=a.decode(C):d&&_!==!0&&(C=function(I){return y(I,s.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,r){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),u=n("./zipEntry"),g=n("./support");function y(m){this.files=[],this.loadOptions=m}y.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(p)+", expected "+a.pretty(m)+")")}},isSignature:function(m,p){var h=this.reader.index;this.reader.setIndex(m);var v=this.reader.readString(4)===p;return this.reader.setIndex(h),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),p=g.uint8array?"uint8array":"array",h=a.transformTo(p,m);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,p,h,v=this.zip64EndOfCentralSize-44;0<v;)m=this.reader.readInt(2),p=this.reader.readInt(4),h=this.reader.readData(p),this.zip64ExtensibleData[m]={id:m,length:p,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,p;for(m=0;m<this.files.length;m++)p=this.files[m],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(m=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var p=m;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var v=p-h;if(0<v)this.isSignature(p,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,r){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),u=n("./crc32"),g=n("./utf8"),y=n("./compressions"),m=n("./support");function p(h,v){this.options=h,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var v,c;if(h.skip(22),this.fileNameLength=h.readInt(2),c=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var d in y)if(Object.prototype.hasOwnProperty.call(y,d)&&y[d].magic===b)return y[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var v=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(v),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var v,c,b,d=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<d;)v=h.readInt(2),c=h.readInt(2),b=h.readData(c),this.extraFields[v]={id:v,length:c,value:b};h.setIndex(d)},handleUTF8:function(){var h=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var c=a.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var d=a.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var v=s(h.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:g.utf8decode(v.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var v=s(h.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:g.utf8decode(v.readData(h.length-5))}return null}},i.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,r){function s(v,c,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=c,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),u=n("./utf8"),g=n("./compressedObject"),y=n("./stream/GenericWorker");s.prototype={internalStream:function(v){var c=null,b="string";try{if(!v)throw new Error("No output type specified.");var d=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),c=this._decompressWorker();var _=!this._dataBinary;_&&!d&&(c=c.pipe(new u.Utf8EncodeWorker)),!_&&d&&(c=c.pipe(new u.Utf8DecodeWorker))}catch(k){(c=new y("error")).error(k)}return new a(c,b,"")},async:function(v,c){return this.internalStream(v).accumulate(c)},nodeStream:function(v,c){return this.internalStream(v||"nodebuffer").toNodejsStream(c)},_compressWorker:function(v,c){if(this._data instanceof g&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),g.createWorkerFrom(b,v,c)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof y?this._data:new o(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<m.length;h++)s.prototype[m[h]]=p;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,r){(function(s){var a,o,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var g=0,y=new u(v),m=s.document.createTextNode("");y.observe(m,{characterData:!0}),a=function(){m.data=g=++g%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var c=s.document.createElement("script");c.onreadystatechange=function(){v(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},s.document.documentElement.appendChild(c)}:function(){setTimeout(v,0)};else{var p=new s.MessageChannel;p.port1.onmessage=v,a=function(){p.port2.postMessage(0)}}var h=[];function v(){var c,b;o=!0;for(var d=h.length;d;){for(b=h,h=[],c=-1;++c<d;)b[c]();d=h.length}o=!1}i.exports=function(c){h.push(c)!==1||o||a()}}).call(this,typeof Re<"u"?Re:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,r){var s=n("immediate");function a(){}var o={},u=["REJECTED"],g=["FULFILLED"],y=["PENDING"];function m(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,d!==a&&c(this,d)}function p(d,_,k){this.promise=d,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function h(d,_,k){s(function(){var C;try{C=_(k)}catch(E){return o.reject(d,E)}C===d?o.reject(d,new TypeError("Cannot resolve promise with itself")):o.resolve(d,C)})}function v(d){var _=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof _=="function")return function(){_.apply(d,arguments)}}function c(d,_){var k=!1;function C(A){k||(k=!0,o.reject(d,A))}function E(A){k||(k=!0,o.resolve(d,A))}var I=b(function(){_(E,C)});I.status==="error"&&C(I.value)}function b(d,_){var k={};try{k.value=d(_),k.status="success"}catch(C){k.status="error",k.value=C}return k}(i.exports=m).prototype.finally=function(d){if(typeof d!="function")return this;var _=this.constructor;return this.then(function(k){return _.resolve(d()).then(function(){return k})},function(k){return _.resolve(d()).then(function(){throw k})})},m.prototype.catch=function(d){return this.then(null,d)},m.prototype.then=function(d,_){if(typeof d!="function"&&this.state===g||typeof _!="function"&&this.state===u)return this;var k=new this.constructor(a);return this.state!==y?h(k,this.state===g?d:_,this.outcome):this.queue.push(new p(k,d,_)),k},p.prototype.callFulfilled=function(d){o.resolve(this.promise,d)},p.prototype.otherCallFulfilled=function(d){h(this.promise,this.onFulfilled,d)},p.prototype.callRejected=function(d){o.reject(this.promise,d)},p.prototype.otherCallRejected=function(d){h(this.promise,this.onRejected,d)},o.resolve=function(d,_){var k=b(v,_);if(k.status==="error")return o.reject(d,k.value);var C=k.value;if(C)c(d,C);else{d.state=g,d.outcome=_;for(var E=-1,I=d.queue.length;++E<I;)d.queue[E].callFulfilled(_)}return d},o.reject=function(d,_){d.state=u,d.outcome=_;for(var k=-1,C=d.queue.length;++k<C;)d.queue[k].callRejected(_);return d},m.resolve=function(d){return d instanceof this?d:o.resolve(new this(a),d)},m.reject=function(d){var _=new this(a);return o.reject(_,d)},m.all=function(d){var _=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,C=!1;if(!k)return this.resolve([]);for(var E=new Array(k),I=0,A=-1,j=new this(a);++A<k;)O(d[A],A);return j;function O(U,H){_.resolve(U).then(function(S){E[H]=S,++I!==k||C||(C=!0,o.resolve(j,E))},function(S){C||(C=!0,o.reject(j,S))})}},m.race=function(d){var _=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,C=!1;if(!k)return this.resolve([]);for(var E=-1,I=new this(a);++E<k;)A=d[E],_.resolve(A).then(function(j){C||(C=!0,o.resolve(I,j))},function(j){C||(C=!0,o.reject(I,j))});var A;return I}},{immediate:36}],38:[function(n,i,r){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,r){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/messages"),g=n("./zlib/zstream"),y=Object.prototype.toString,m=0,p=-1,h=0,v=8;function c(d){if(!(this instanceof c))return new c(d);this.options=a.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},d||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(k!==m)throw new Error(u[k]);if(_.header&&s.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?o.string2buf(_.dictionary):y.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(k=s.deflateSetDictionary(this.strm,C))!==m)throw new Error(u[k]);this._dict_set=!0}}function b(d,_){var k=new c(_);if(k.push(d,!0),k.err)throw k.msg||u[k.err];return k.result}c.prototype.push=function(d,_){var k,C,E=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof d=="string"?E.input=o.string2buf(d):y.call(d)==="[object ArrayBuffer]"?E.input=new Uint8Array(d):E.input=d,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(I),E.next_out=0,E.avail_out=I),(k=s.deflate(E,C))!==1&&k!==m)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return C===4?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===m):C!==2||(this.onEnd(m),!(E.avail_out=0))},c.prototype.onData=function(d){this.chunks.push(d)},c.prototype.onEnd=function(d){d===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},r.Deflate=c,r.deflate=b,r.deflateRaw=function(d,_){return(_=_||{}).raw=!0,b(d,_)},r.gzip=function(d,_){return(_=_||{}).gzip=!0,b(d,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,r){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/constants"),g=n("./zlib/messages"),y=n("./zlib/zstream"),m=n("./zlib/gzheader"),p=Object.prototype.toString;function h(c){if(!(this instanceof h))return new h(c);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},c||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||c&&c.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var d=s.inflateInit2(this.strm,b.windowBits);if(d!==u.Z_OK)throw new Error(g[d]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function v(c,b){var d=new h(b);if(d.push(c,!0),d.err)throw d.msg||g[d.err];return d.result}h.prototype.push=function(c,b){var d,_,k,C,E,I,A=this.strm,j=this.options.chunkSize,O=this.options.dictionary,U=!1;if(this.ended)return!1;_=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof c=="string"?A.input=o.binstring2buf(c):p.call(c)==="[object ArrayBuffer]"?A.input=new Uint8Array(c):A.input=c,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(j),A.next_out=0,A.avail_out=j),(d=s.inflate(A,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&O&&(I=typeof O=="string"?o.string2buf(O):p.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,d=s.inflateSetDictionary(this.strm,I)),d===u.Z_BUF_ERROR&&U===!0&&(d=u.Z_OK,U=!1),d!==u.Z_STREAM_END&&d!==u.Z_OK)return this.onEnd(d),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&d!==u.Z_STREAM_END&&(A.avail_in!==0||_!==u.Z_FINISH&&_!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=o.utf8border(A.output,A.next_out),C=A.next_out-k,E=o.buf2string(A.output,k),A.next_out=C,A.avail_out=j-C,C&&a.arraySet(A.output,A.output,k,C,0),this.onData(E)):this.onData(a.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(U=!0)}while((0<A.avail_in||A.avail_out===0)&&d!==u.Z_STREAM_END);return d===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(d=s.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===u.Z_OK):_!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(A.avail_out=0))},h.prototype.onData=function(c){this.chunks.push(c)},h.prototype.onEnd=function(c){c===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},r.Inflate=h,r.inflate=v,r.inflateRaw=function(c,b){return(b=b||{}).raw=!0,v(c,b)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(u){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var y=g.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var m in y)y.hasOwnProperty(m)&&(u[m]=y[m])}}return u},r.shrinkBuf=function(u,g){return u.length===g?u:u.subarray?u.subarray(0,g):(u.length=g,u)};var a={arraySet:function(u,g,y,m,p){if(g.subarray&&u.subarray)u.set(g.subarray(y,y+m),p);else for(var h=0;h<m;h++)u[p+h]=g[y+h]},flattenChunks:function(u){var g,y,m,p,h,v;for(g=m=0,y=u.length;g<y;g++)m+=u[g].length;for(v=new Uint8Array(m),g=p=0,y=u.length;g<y;g++)h=u[g],v.set(h,p),p+=h.length;return v}},o={arraySet:function(u,g,y,m,p){for(var h=0;h<m;h++)u[p+h]=g[y+h]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(n,i,r){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),g=0;g<256;g++)u[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function y(m,p){if(p<65537&&(m.subarray&&o||!m.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(m,p));for(var h="",v=0;v<p;v++)h+=String.fromCharCode(m[v]);return h}u[254]=u[254]=1,r.string2buf=function(m){var p,h,v,c,b,d=m.length,_=0;for(c=0;c<d;c++)(64512&(h=m.charCodeAt(c)))==55296&&c+1<d&&(64512&(v=m.charCodeAt(c+1)))==56320&&(h=65536+(h-55296<<10)+(v-56320),c++),_+=h<128?1:h<2048?2:h<65536?3:4;for(p=new s.Buf8(_),c=b=0;b<_;c++)(64512&(h=m.charCodeAt(c)))==55296&&c+1<d&&(64512&(v=m.charCodeAt(c+1)))==56320&&(h=65536+(h-55296<<10)+(v-56320),c++),h<128?p[b++]=h:(h<2048?p[b++]=192|h>>>6:(h<65536?p[b++]=224|h>>>12:(p[b++]=240|h>>>18,p[b++]=128|h>>>12&63),p[b++]=128|h>>>6&63),p[b++]=128|63&h);return p},r.buf2binstring=function(m){return y(m,m.length)},r.binstring2buf=function(m){for(var p=new s.Buf8(m.length),h=0,v=p.length;h<v;h++)p[h]=m.charCodeAt(h);return p},r.buf2string=function(m,p){var h,v,c,b,d=p||m.length,_=new Array(2*d);for(h=v=0;h<d;)if((c=m[h++])<128)_[v++]=c;else if(4<(b=u[c]))_[v++]=65533,h+=b-1;else{for(c&=b===2?31:b===3?15:7;1<b&&h<d;)c=c<<6|63&m[h++],b--;1<b?_[v++]=65533:c<65536?_[v++]=c:(c-=65536,_[v++]=55296|c>>10&1023,_[v++]=56320|1023&c)}return y(_,v)},r.utf8border=function(m,p){var h;for((p=p||m.length)>m.length&&(p=m.length),h=p-1;0<=h&&(192&m[h])==128;)h--;return h<0||h===0?p:h+u[m[h]]>p?h:p}},{"./common":41}],43:[function(n,i,r){i.exports=function(s,a,o,u){for(var g=65535&s|0,y=s>>>16&65535|0,m=0;o!==0;){for(o-=m=2e3<o?2e3:o;y=y+(g=g+a[u++]|0)|0,--m;);g%=65521,y%=65521}return g|y<<16|0}},{}],44:[function(n,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,r){var s=function(){for(var a,o=[],u=0;u<256;u++){a=u;for(var g=0;g<8;g++)a=1&a?3988292384^a>>>1:a>>>1;o[u]=a}return o}();i.exports=function(a,o,u,g){var y=s,m=g+u;a^=-1;for(var p=g;p<m;p++)a=a>>>8^y[255&(a^o[p])];return-1^a}},{}],46:[function(n,i,r){var s,a=n("../utils/common"),o=n("./trees"),u=n("./adler32"),g=n("./crc32"),y=n("./messages"),m=0,p=4,h=0,v=-2,c=-1,b=4,d=2,_=8,k=9,C=286,E=30,I=19,A=2*C+1,j=15,O=3,U=258,H=U+O+1,S=42,R=113,f=1,F=2,Q=3,K=4;function rt(l,N){return l.msg=y[N],N}function W(l){return(l<<1)-(4<l?9:0)}function tt(l){for(var N=l.length;0<=--N;)l[N]=0}function B(l){var N=l.state,D=N.pending;D>l.avail_out&&(D=l.avail_out),D!==0&&(a.arraySet(l.output,N.pending_buf,N.pending_out,D,l.next_out),l.next_out+=D,N.pending_out+=D,l.total_out+=D,l.avail_out-=D,N.pending-=D,N.pending===0&&(N.pending_out=0))}function T(l,N){o._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,N),l.block_start=l.strstart,B(l.strm)}function et(l,N){l.pending_buf[l.pending++]=N}function V(l,N){l.pending_buf[l.pending++]=N>>>8&255,l.pending_buf[l.pending++]=255&N}function G(l,N){var D,x,w=l.max_chain_length,z=l.strstart,L=l.prev_length,M=l.nice_match,P=l.strstart>l.w_size-H?l.strstart-(l.w_size-H):0,Z=l.window,$=l.w_mask,q=l.prev,J=l.strstart+U,ut=Z[z+L-1],st=Z[z+L];l.prev_length>=l.good_match&&(w>>=2),M>l.lookahead&&(M=l.lookahead);do if(Z[(D=N)+L]===st&&Z[D+L-1]===ut&&Z[D]===Z[z]&&Z[++D]===Z[z+1]){z+=2,D++;do;while(Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&Z[++z]===Z[++D]&&z<J);if(x=U-(J-z),z=J-U,L<x){if(l.match_start=N,M<=(L=x))break;ut=Z[z+L-1],st=Z[z+L]}}while((N=q[N&$])>P&&--w!=0);return L<=l.lookahead?L:l.lookahead}function ht(l){var N,D,x,w,z,L,M,P,Z,$,q=l.w_size;do{if(w=l.window_size-l.lookahead-l.strstart,l.strstart>=q+(q-H)){for(a.arraySet(l.window,l.window,q,q,0),l.match_start-=q,l.strstart-=q,l.block_start-=q,N=D=l.hash_size;x=l.head[--N],l.head[N]=q<=x?x-q:0,--D;);for(N=D=q;x=l.prev[--N],l.prev[N]=q<=x?x-q:0,--D;);w+=q}if(l.strm.avail_in===0)break;if(L=l.strm,M=l.window,P=l.strstart+l.lookahead,Z=w,$=void 0,$=L.avail_in,Z<$&&($=Z),D=$===0?0:(L.avail_in-=$,a.arraySet(M,L.input,L.next_in,$,P),L.state.wrap===1?L.adler=u(L.adler,M,$,P):L.state.wrap===2&&(L.adler=g(L.adler,M,$,P)),L.next_in+=$,L.total_in+=$,$),l.lookahead+=D,l.lookahead+l.insert>=O)for(z=l.strstart-l.insert,l.ins_h=l.window[z],l.ins_h=(l.ins_h<<l.hash_shift^l.window[z+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[z+O-1])&l.hash_mask,l.prev[z&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=z,z++,l.insert--,!(l.lookahead+l.insert<O)););}while(l.lookahead<H&&l.strm.avail_in!==0)}function gt(l,N){for(var D,x;;){if(l.lookahead<H){if(ht(l),l.lookahead<H&&N===m)return f;if(l.lookahead===0)break}if(D=0,l.lookahead>=O&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+O-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),D!==0&&l.strstart-D<=l.w_size-H&&(l.match_length=G(l,D)),l.match_length>=O)if(x=o._tr_tally(l,l.strstart-l.match_start,l.match_length-O),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=O){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+O-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else x=o._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(x&&(T(l,!1),l.strm.avail_out===0))return f}return l.insert=l.strstart<O-1?l.strstart:O-1,N===p?(T(l,!0),l.strm.avail_out===0?Q:K):l.last_lit&&(T(l,!1),l.strm.avail_out===0)?f:F}function it(l,N){for(var D,x,w;;){if(l.lookahead<H){if(ht(l),l.lookahead<H&&N===m)return f;if(l.lookahead===0)break}if(D=0,l.lookahead>=O&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+O-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=O-1,D!==0&&l.prev_length<l.max_lazy_match&&l.strstart-D<=l.w_size-H&&(l.match_length=G(l,D),l.match_length<=5&&(l.strategy===1||l.match_length===O&&4096<l.strstart-l.match_start)&&(l.match_length=O-1)),l.prev_length>=O&&l.match_length<=l.prev_length){for(w=l.strstart+l.lookahead-O,x=o._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-O),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=w&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+O-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=O-1,l.strstart++,x&&(T(l,!1),l.strm.avail_out===0))return f}else if(l.match_available){if((x=o._tr_tally(l,0,l.window[l.strstart-1]))&&T(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return f}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(x=o._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<O-1?l.strstart:O-1,N===p?(T(l,!0),l.strm.avail_out===0?Q:K):l.last_lit&&(T(l,!1),l.strm.avail_out===0)?f:F}function at(l,N,D,x,w){this.good_length=l,this.max_lazy=N,this.nice_length=D,this.max_chain=x,this.func=w}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*A),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*I+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(j+1),this.heap=new a.Buf16(2*C+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ft(l){var N;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=d,(N=l.state).pending=0,N.pending_out=0,N.wrap<0&&(N.wrap=-N.wrap),N.status=N.wrap?S:R,l.adler=N.wrap===2?0:1,N.last_flush=m,o._tr_init(N),h):rt(l,v)}function At(l){var N=ft(l);return N===h&&function(D){D.window_size=2*D.w_size,tt(D.head),D.max_lazy_match=s[D.level].max_lazy,D.good_match=s[D.level].good_length,D.nice_match=s[D.level].nice_length,D.max_chain_length=s[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=O-1,D.match_available=0,D.ins_h=0}(l.state),N}function St(l,N,D,x,w,z){if(!l)return v;var L=1;if(N===c&&(N=6),x<0?(L=0,x=-x):15<x&&(L=2,x-=16),w<1||k<w||D!==_||x<8||15<x||N<0||9<N||z<0||b<z)return rt(l,v);x===8&&(x=9);var M=new yt;return(l.state=M).strm=l,M.wrap=L,M.gzhead=null,M.w_bits=x,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=w+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+O-1)/O),M.window=new a.Buf8(2*M.w_size),M.head=new a.Buf16(M.hash_size),M.prev=new a.Buf16(M.w_size),M.lit_bufsize=1<<w+6,M.pending_buf_size=4*M.lit_bufsize,M.pending_buf=new a.Buf8(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=N,M.strategy=z,M.method=D,At(l)}s=[new at(0,0,0,0,function(l,N){var D=65535;for(D>l.pending_buf_size-5&&(D=l.pending_buf_size-5);;){if(l.lookahead<=1){if(ht(l),l.lookahead===0&&N===m)return f;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var x=l.block_start+D;if((l.strstart===0||l.strstart>=x)&&(l.lookahead=l.strstart-x,l.strstart=x,T(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-H&&(T(l,!1),l.strm.avail_out===0))return f}return l.insert=0,N===p?(T(l,!0),l.strm.avail_out===0?Q:K):(l.strstart>l.block_start&&(T(l,!1),l.strm.avail_out),f)}),new at(4,4,8,4,gt),new at(4,5,16,8,gt),new at(4,6,32,32,gt),new at(4,4,16,16,it),new at(8,16,32,32,it),new at(8,16,128,128,it),new at(8,32,128,256,it),new at(32,128,258,1024,it),new at(32,258,258,4096,it)],r.deflateInit=function(l,N){return St(l,N,_,15,8,0)},r.deflateInit2=St,r.deflateReset=At,r.deflateResetKeep=ft,r.deflateSetHeader=function(l,N){return l&&l.state?l.state.wrap!==2?v:(l.state.gzhead=N,h):v},r.deflate=function(l,N){var D,x,w,z;if(!l||!l.state||5<N||N<0)return l?rt(l,v):v;if(x=l.state,!l.output||!l.input&&l.avail_in!==0||x.status===666&&N!==p)return rt(l,l.avail_out===0?-5:v);if(x.strm=l,D=x.last_flush,x.last_flush=N,x.status===S)if(x.wrap===2)l.adler=0,et(x,31),et(x,139),et(x,8),x.gzhead?(et(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),et(x,255&x.gzhead.time),et(x,x.gzhead.time>>8&255),et(x,x.gzhead.time>>16&255),et(x,x.gzhead.time>>24&255),et(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),et(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(et(x,255&x.gzhead.extra.length),et(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(l.adler=g(l.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(et(x,0),et(x,0),et(x,0),et(x,0),et(x,0),et(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),et(x,3),x.status=R);else{var L=_+(x.w_bits-8<<4)<<8;L|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(L|=32),L+=31-L%31,x.status=R,V(x,L),x.strstart!==0&&(V(x,l.adler>>>16),V(x,65535&l.adler)),l.adler=1}if(x.status===69)if(x.gzhead.extra){for(w=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>w&&(l.adler=g(l.adler,x.pending_buf,x.pending-w,w)),B(l),w=x.pending,x.pending!==x.pending_buf_size));)et(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>w&&(l.adler=g(l.adler,x.pending_buf,x.pending-w,w)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){w=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>w&&(l.adler=g(l.adler,x.pending_buf,x.pending-w,w)),B(l),w=x.pending,x.pending===x.pending_buf_size)){z=1;break}z=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,et(x,z)}while(z!==0);x.gzhead.hcrc&&x.pending>w&&(l.adler=g(l.adler,x.pending_buf,x.pending-w,w)),z===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){w=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>w&&(l.adler=g(l.adler,x.pending_buf,x.pending-w,w)),B(l),w=x.pending,x.pending===x.pending_buf_size)){z=1;break}z=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,et(x,z)}while(z!==0);x.gzhead.hcrc&&x.pending>w&&(l.adler=g(l.adler,x.pending_buf,x.pending-w,w)),z===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&B(l),x.pending+2<=x.pending_buf_size&&(et(x,255&l.adler),et(x,l.adler>>8&255),l.adler=0,x.status=R)):x.status=R),x.pending!==0){if(B(l),l.avail_out===0)return x.last_flush=-1,h}else if(l.avail_in===0&&W(N)<=W(D)&&N!==p)return rt(l,-5);if(x.status===666&&l.avail_in!==0)return rt(l,-5);if(l.avail_in!==0||x.lookahead!==0||N!==m&&x.status!==666){var M=x.strategy===2?function(P,Z){for(var $;;){if(P.lookahead===0&&(ht(P),P.lookahead===0)){if(Z===m)return f;break}if(P.match_length=0,$=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,$&&(T(P,!1),P.strm.avail_out===0))return f}return P.insert=0,Z===p?(T(P,!0),P.strm.avail_out===0?Q:K):P.last_lit&&(T(P,!1),P.strm.avail_out===0)?f:F}(x,N):x.strategy===3?function(P,Z){for(var $,q,J,ut,st=P.window;;){if(P.lookahead<=U){if(ht(P),P.lookahead<=U&&Z===m)return f;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=O&&0<P.strstart&&(q=st[J=P.strstart-1])===st[++J]&&q===st[++J]&&q===st[++J]){ut=P.strstart+U;do;while(q===st[++J]&&q===st[++J]&&q===st[++J]&&q===st[++J]&&q===st[++J]&&q===st[++J]&&q===st[++J]&&q===st[++J]&&J<ut);P.match_length=U-(ut-J),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=O?($=o._tr_tally(P,1,P.match_length-O),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):($=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),$&&(T(P,!1),P.strm.avail_out===0))return f}return P.insert=0,Z===p?(T(P,!0),P.strm.avail_out===0?Q:K):P.last_lit&&(T(P,!1),P.strm.avail_out===0)?f:F}(x,N):s[x.level].func(x,N);if(M!==Q&&M!==K||(x.status=666),M===f||M===Q)return l.avail_out===0&&(x.last_flush=-1),h;if(M===F&&(N===1?o._tr_align(x):N!==5&&(o._tr_stored_block(x,0,0,!1),N===3&&(tt(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),B(l),l.avail_out===0))return x.last_flush=-1,h}return N!==p?h:x.wrap<=0?1:(x.wrap===2?(et(x,255&l.adler),et(x,l.adler>>8&255),et(x,l.adler>>16&255),et(x,l.adler>>24&255),et(x,255&l.total_in),et(x,l.total_in>>8&255),et(x,l.total_in>>16&255),et(x,l.total_in>>24&255)):(V(x,l.adler>>>16),V(x,65535&l.adler)),B(l),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?h:1)},r.deflateEnd=function(l){var N;return l&&l.state?(N=l.state.status)!==S&&N!==69&&N!==73&&N!==91&&N!==103&&N!==R&&N!==666?rt(l,v):(l.state=null,N===R?rt(l,-3):h):v},r.deflateSetDictionary=function(l,N){var D,x,w,z,L,M,P,Z,$=N.length;if(!l||!l.state||(z=(D=l.state).wrap)===2||z===1&&D.status!==S||D.lookahead)return v;for(z===1&&(l.adler=u(l.adler,N,$,0)),D.wrap=0,$>=D.w_size&&(z===0&&(tt(D.head),D.strstart=0,D.block_start=0,D.insert=0),Z=new a.Buf8(D.w_size),a.arraySet(Z,N,$-D.w_size,D.w_size,0),N=Z,$=D.w_size),L=l.avail_in,M=l.next_in,P=l.input,l.avail_in=$,l.next_in=0,l.input=N,ht(D);D.lookahead>=O;){for(x=D.strstart,w=D.lookahead-(O-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[x+O-1])&D.hash_mask,D.prev[x&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=x,x++,--w;);D.strstart=x,D.lookahead=O-1,ht(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=O-1,D.match_available=0,l.next_in=M,l.input=P,l.avail_in=L,D.wrap=z,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,r){i.exports=function(s,a){var o,u,g,y,m,p,h,v,c,b,d,_,k,C,E,I,A,j,O,U,H,S,R,f,F;o=s.state,u=s.next_in,f=s.input,g=u+(s.avail_in-5),y=s.next_out,F=s.output,m=y-(a-s.avail_out),p=y+(s.avail_out-257),h=o.dmax,v=o.wsize,c=o.whave,b=o.wnext,d=o.window,_=o.hold,k=o.bits,C=o.lencode,E=o.distcode,I=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;t:do{k<15&&(_+=f[u++]<<k,k+=8,_+=f[u++]<<k,k+=8),j=C[_&I];e:for(;;){if(_>>>=O=j>>>24,k-=O,(O=j>>>16&255)===0)F[y++]=65535&j;else{if(!(16&O)){if(!(64&O)){j=C[(65535&j)+(_&(1<<O)-1)];continue e}if(32&O){o.mode=12;break t}s.msg="invalid literal/length code",o.mode=30;break t}U=65535&j,(O&=15)&&(k<O&&(_+=f[u++]<<k,k+=8),U+=_&(1<<O)-1,_>>>=O,k-=O),k<15&&(_+=f[u++]<<k,k+=8,_+=f[u++]<<k,k+=8),j=E[_&A];n:for(;;){if(_>>>=O=j>>>24,k-=O,!(16&(O=j>>>16&255))){if(!(64&O)){j=E[(65535&j)+(_&(1<<O)-1)];continue n}s.msg="invalid distance code",o.mode=30;break t}if(H=65535&j,k<(O&=15)&&(_+=f[u++]<<k,(k+=8)<O&&(_+=f[u++]<<k,k+=8)),h<(H+=_&(1<<O)-1)){s.msg="invalid distance too far back",o.mode=30;break t}if(_>>>=O,k-=O,(O=y-m)<H){if(c<(O=H-O)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break t}if(R=d,(S=0)===b){if(S+=v-O,O<U){for(U-=O;F[y++]=d[S++],--O;);S=y-H,R=F}}else if(b<O){if(S+=v+b-O,(O-=b)<U){for(U-=O;F[y++]=d[S++],--O;);if(S=0,b<U){for(U-=O=b;F[y++]=d[S++],--O;);S=y-H,R=F}}}else if(S+=b-O,O<U){for(U-=O;F[y++]=d[S++],--O;);S=y-H,R=F}for(;2<U;)F[y++]=R[S++],F[y++]=R[S++],F[y++]=R[S++],U-=3;U&&(F[y++]=R[S++],1<U&&(F[y++]=R[S++]))}else{for(S=y-H;F[y++]=F[S++],F[y++]=F[S++],F[y++]=F[S++],2<(U-=3););U&&(F[y++]=F[S++],1<U&&(F[y++]=F[S++]))}break}}break}}while(u<g&&y<p);u-=U=k>>3,_&=(1<<(k-=U<<3))-1,s.next_in=u,s.next_out=y,s.avail_in=u<g?g-u+5:5-(u-g),s.avail_out=y<p?p-y+257:257-(y-p),o.hold=_,o.bits=k}},{}],49:[function(n,i,r){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),u=n("./inffast"),g=n("./inftrees"),y=1,m=2,p=0,h=-2,v=1,c=852,b=592;function d(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(S){var R;return S&&S.state?(R=S.state,S.total_in=S.total_out=R.total=0,S.msg="",R.wrap&&(S.adler=1&R.wrap),R.mode=v,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new s.Buf32(c),R.distcode=R.distdyn=new s.Buf32(b),R.sane=1,R.back=-1,p):h}function C(S){var R;return S&&S.state?((R=S.state).wsize=0,R.whave=0,R.wnext=0,k(S)):h}function E(S,R){var f,F;return S&&S.state?(F=S.state,R<0?(f=0,R=-R):(f=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?h:(F.window!==null&&F.wbits!==R&&(F.window=null),F.wrap=f,F.wbits=R,C(S))):h}function I(S,R){var f,F;return S?(F=new _,(S.state=F).window=null,(f=E(S,R))!==p&&(S.state=null),f):h}var A,j,O=!0;function U(S){if(O){var R;for(A=new s.Buf32(512),j=new s.Buf32(32),R=0;R<144;)S.lens[R++]=8;for(;R<256;)S.lens[R++]=9;for(;R<280;)S.lens[R++]=7;for(;R<288;)S.lens[R++]=8;for(g(y,S.lens,0,288,A,0,S.work,{bits:9}),R=0;R<32;)S.lens[R++]=5;g(m,S.lens,0,32,j,0,S.work,{bits:5}),O=!1}S.lencode=A,S.lenbits=9,S.distcode=j,S.distbits=5}function H(S,R,f,F){var Q,K=S.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new s.Buf8(K.wsize)),F>=K.wsize?(s.arraySet(K.window,R,f-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(F<(Q=K.wsize-K.wnext)&&(Q=F),s.arraySet(K.window,R,f-F,Q,K.wnext),(F-=Q)?(s.arraySet(K.window,R,f-F,F,0),K.wnext=F,K.whave=K.wsize):(K.wnext+=Q,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Q))),0}r.inflateReset=C,r.inflateReset2=E,r.inflateResetKeep=k,r.inflateInit=function(S){return I(S,15)},r.inflateInit2=I,r.inflate=function(S,R){var f,F,Q,K,rt,W,tt,B,T,et,V,G,ht,gt,it,at,yt,ft,At,St,l,N,D,x,w=0,z=new s.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return h;(f=S.state).mode===12&&(f.mode=13),rt=S.next_out,Q=S.output,tt=S.avail_out,K=S.next_in,F=S.input,W=S.avail_in,B=f.hold,T=f.bits,et=W,V=tt,N=p;t:for(;;)switch(f.mode){case v:if(f.wrap===0){f.mode=13;break}for(;T<16;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(2&f.wrap&&B===35615){z[f.check=0]=255&B,z[1]=B>>>8&255,f.check=o(f.check,z,2,0),T=B=0,f.mode=2;break}if(f.flags=0,f.head&&(f.head.done=!1),!(1&f.wrap)||(((255&B)<<8)+(B>>8))%31){S.msg="incorrect header check",f.mode=30;break}if((15&B)!=8){S.msg="unknown compression method",f.mode=30;break}if(T-=4,l=8+(15&(B>>>=4)),f.wbits===0)f.wbits=l;else if(l>f.wbits){S.msg="invalid window size",f.mode=30;break}f.dmax=1<<l,S.adler=f.check=1,f.mode=512&B?10:12,T=B=0;break;case 2:for(;T<16;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(f.flags=B,(255&f.flags)!=8){S.msg="unknown compression method",f.mode=30;break}if(57344&f.flags){S.msg="unknown header flags set",f.mode=30;break}f.head&&(f.head.text=B>>8&1),512&f.flags&&(z[0]=255&B,z[1]=B>>>8&255,f.check=o(f.check,z,2,0)),T=B=0,f.mode=3;case 3:for(;T<32;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}f.head&&(f.head.time=B),512&f.flags&&(z[0]=255&B,z[1]=B>>>8&255,z[2]=B>>>16&255,z[3]=B>>>24&255,f.check=o(f.check,z,4,0)),T=B=0,f.mode=4;case 4:for(;T<16;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}f.head&&(f.head.xflags=255&B,f.head.os=B>>8),512&f.flags&&(z[0]=255&B,z[1]=B>>>8&255,f.check=o(f.check,z,2,0)),T=B=0,f.mode=5;case 5:if(1024&f.flags){for(;T<16;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}f.length=B,f.head&&(f.head.extra_len=B),512&f.flags&&(z[0]=255&B,z[1]=B>>>8&255,f.check=o(f.check,z,2,0)),T=B=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(1024&f.flags&&(W<(G=f.length)&&(G=W),G&&(f.head&&(l=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Array(f.head.extra_len)),s.arraySet(f.head.extra,F,K,G,l)),512&f.flags&&(f.check=o(f.check,F,G,K)),W-=G,K+=G,f.length-=G),f.length))break t;f.length=0,f.mode=7;case 7:if(2048&f.flags){if(W===0)break t;for(G=0;l=F[K+G++],f.head&&l&&f.length<65536&&(f.head.name+=String.fromCharCode(l)),l&&G<W;);if(512&f.flags&&(f.check=o(f.check,F,G,K)),W-=G,K+=G,l)break t}else f.head&&(f.head.name=null);f.length=0,f.mode=8;case 8:if(4096&f.flags){if(W===0)break t;for(G=0;l=F[K+G++],f.head&&l&&f.length<65536&&(f.head.comment+=String.fromCharCode(l)),l&&G<W;);if(512&f.flags&&(f.check=o(f.check,F,G,K)),W-=G,K+=G,l)break t}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(512&f.flags){for(;T<16;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(B!==(65535&f.check)){S.msg="header crc mismatch",f.mode=30;break}T=B=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),S.adler=f.check=0,f.mode=12;break;case 10:for(;T<32;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}S.adler=f.check=d(B),T=B=0,f.mode=11;case 11:if(f.havedict===0)return S.next_out=rt,S.avail_out=tt,S.next_in=K,S.avail_in=W,f.hold=B,f.bits=T,2;S.adler=f.check=1,f.mode=12;case 12:if(R===5||R===6)break t;case 13:if(f.last){B>>>=7&T,T-=7&T,f.mode=27;break}for(;T<3;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}switch(f.last=1&B,T-=1,3&(B>>>=1)){case 0:f.mode=14;break;case 1:if(U(f),f.mode=20,R!==6)break;B>>>=2,T-=2;break t;case 2:f.mode=17;break;case 3:S.msg="invalid block type",f.mode=30}B>>>=2,T-=2;break;case 14:for(B>>>=7&T,T-=7&T;T<32;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if((65535&B)!=(B>>>16^65535)){S.msg="invalid stored block lengths",f.mode=30;break}if(f.length=65535&B,T=B=0,f.mode=15,R===6)break t;case 15:f.mode=16;case 16:if(G=f.length){if(W<G&&(G=W),tt<G&&(G=tt),G===0)break t;s.arraySet(Q,F,K,G,rt),W-=G,K+=G,tt-=G,rt+=G,f.length-=G;break}f.mode=12;break;case 17:for(;T<14;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(f.nlen=257+(31&B),B>>>=5,T-=5,f.ndist=1+(31&B),B>>>=5,T-=5,f.ncode=4+(15&B),B>>>=4,T-=4,286<f.nlen||30<f.ndist){S.msg="too many length or distance symbols",f.mode=30;break}f.have=0,f.mode=18;case 18:for(;f.have<f.ncode;){for(;T<3;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}f.lens[L[f.have++]]=7&B,B>>>=3,T-=3}for(;f.have<19;)f.lens[L[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,D={bits:f.lenbits},N=g(0,f.lens,0,19,f.lencode,0,f.work,D),f.lenbits=D.bits,N){S.msg="invalid code lengths set",f.mode=30;break}f.have=0,f.mode=19;case 19:for(;f.have<f.nlen+f.ndist;){for(;at=(w=f.lencode[B&(1<<f.lenbits)-1])>>>16&255,yt=65535&w,!((it=w>>>24)<=T);){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(yt<16)B>>>=it,T-=it,f.lens[f.have++]=yt;else{if(yt===16){for(x=it+2;T<x;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(B>>>=it,T-=it,f.have===0){S.msg="invalid bit length repeat",f.mode=30;break}l=f.lens[f.have-1],G=3+(3&B),B>>>=2,T-=2}else if(yt===17){for(x=it+3;T<x;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}T-=it,l=0,G=3+(7&(B>>>=it)),B>>>=3,T-=3}else{for(x=it+7;T<x;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}T-=it,l=0,G=11+(127&(B>>>=it)),B>>>=7,T-=7}if(f.have+G>f.nlen+f.ndist){S.msg="invalid bit length repeat",f.mode=30;break}for(;G--;)f.lens[f.have++]=l}}if(f.mode===30)break;if(f.lens[256]===0){S.msg="invalid code -- missing end-of-block",f.mode=30;break}if(f.lenbits=9,D={bits:f.lenbits},N=g(y,f.lens,0,f.nlen,f.lencode,0,f.work,D),f.lenbits=D.bits,N){S.msg="invalid literal/lengths set",f.mode=30;break}if(f.distbits=6,f.distcode=f.distdyn,D={bits:f.distbits},N=g(m,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,D),f.distbits=D.bits,N){S.msg="invalid distances set",f.mode=30;break}if(f.mode=20,R===6)break t;case 20:f.mode=21;case 21:if(6<=W&&258<=tt){S.next_out=rt,S.avail_out=tt,S.next_in=K,S.avail_in=W,f.hold=B,f.bits=T,u(S,V),rt=S.next_out,Q=S.output,tt=S.avail_out,K=S.next_in,F=S.input,W=S.avail_in,B=f.hold,T=f.bits,f.mode===12&&(f.back=-1);break}for(f.back=0;at=(w=f.lencode[B&(1<<f.lenbits)-1])>>>16&255,yt=65535&w,!((it=w>>>24)<=T);){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(at&&!(240&at)){for(ft=it,At=at,St=yt;at=(w=f.lencode[St+((B&(1<<ft+At)-1)>>ft)])>>>16&255,yt=65535&w,!(ft+(it=w>>>24)<=T);){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}B>>>=ft,T-=ft,f.back+=ft}if(B>>>=it,T-=it,f.back+=it,f.length=yt,at===0){f.mode=26;break}if(32&at){f.back=-1,f.mode=12;break}if(64&at){S.msg="invalid literal/length code",f.mode=30;break}f.extra=15&at,f.mode=22;case 22:if(f.extra){for(x=f.extra;T<x;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}f.length+=B&(1<<f.extra)-1,B>>>=f.extra,T-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=23;case 23:for(;at=(w=f.distcode[B&(1<<f.distbits)-1])>>>16&255,yt=65535&w,!((it=w>>>24)<=T);){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(!(240&at)){for(ft=it,At=at,St=yt;at=(w=f.distcode[St+((B&(1<<ft+At)-1)>>ft)])>>>16&255,yt=65535&w,!(ft+(it=w>>>24)<=T);){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}B>>>=ft,T-=ft,f.back+=ft}if(B>>>=it,T-=it,f.back+=it,64&at){S.msg="invalid distance code",f.mode=30;break}f.offset=yt,f.extra=15&at,f.mode=24;case 24:if(f.extra){for(x=f.extra;T<x;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}f.offset+=B&(1<<f.extra)-1,B>>>=f.extra,T-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){S.msg="invalid distance too far back",f.mode=30;break}f.mode=25;case 25:if(tt===0)break t;if(G=V-tt,f.offset>G){if((G=f.offset-G)>f.whave&&f.sane){S.msg="invalid distance too far back",f.mode=30;break}ht=G>f.wnext?(G-=f.wnext,f.wsize-G):f.wnext-G,G>f.length&&(G=f.length),gt=f.window}else gt=Q,ht=rt-f.offset,G=f.length;for(tt<G&&(G=tt),tt-=G,f.length-=G;Q[rt++]=gt[ht++],--G;);f.length===0&&(f.mode=21);break;case 26:if(tt===0)break t;Q[rt++]=f.length,tt--,f.mode=21;break;case 27:if(f.wrap){for(;T<32;){if(W===0)break t;W--,B|=F[K++]<<T,T+=8}if(V-=tt,S.total_out+=V,f.total+=V,V&&(S.adler=f.check=f.flags?o(f.check,Q,V,rt-V):a(f.check,Q,V,rt-V)),V=tt,(f.flags?B:d(B))!==f.check){S.msg="incorrect data check",f.mode=30;break}T=B=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;T<32;){if(W===0)break t;W--,B+=F[K++]<<T,T+=8}if(B!==(4294967295&f.total)){S.msg="incorrect length check",f.mode=30;break}T=B=0}f.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;case 32:default:return h}return S.next_out=rt,S.avail_out=tt,S.next_in=K,S.avail_in=W,f.hold=B,f.bits=T,(f.wsize||V!==S.avail_out&&f.mode<30&&(f.mode<27||R!==4))&&H(S,S.output,S.next_out,V-S.avail_out)?(f.mode=31,-4):(et-=S.avail_in,V-=S.avail_out,S.total_in+=et,S.total_out+=V,f.total+=V,f.wrap&&V&&(S.adler=f.check=f.flags?o(f.check,Q,V,S.next_out-V):a(f.check,Q,V,S.next_out-V)),S.data_type=f.bits+(f.last?64:0)+(f.mode===12?128:0)+(f.mode===20||f.mode===15?256:0),(et==0&&V===0||R===4)&&N===p&&(N=-5),N)},r.inflateEnd=function(S){if(!S||!S.state)return h;var R=S.state;return R.window&&(R.window=null),S.state=null,p},r.inflateGetHeader=function(S,R){var f;return S&&S.state&&2&(f=S.state).wrap?((f.head=R).done=!1,p):h},r.inflateSetDictionary=function(S,R){var f,F=R.length;return S&&S.state?(f=S.state).wrap!==0&&f.mode!==11?h:f.mode===11&&a(1,R,F,0)!==f.check?-3:H(S,R,F,F)?(f.mode=31,-4):(f.havedict=1,p):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,r){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(y,m,p,h,v,c,b,d){var _,k,C,E,I,A,j,O,U,H=d.bits,S=0,R=0,f=0,F=0,Q=0,K=0,rt=0,W=0,tt=0,B=0,T=null,et=0,V=new s.Buf16(16),G=new s.Buf16(16),ht=null,gt=0;for(S=0;S<=15;S++)V[S]=0;for(R=0;R<h;R++)V[m[p+R]]++;for(Q=H,F=15;1<=F&&V[F]===0;F--);if(F<Q&&(Q=F),F===0)return v[c++]=20971520,v[c++]=20971520,d.bits=1,0;for(f=1;f<F&&V[f]===0;f++);for(Q<f&&(Q=f),S=W=1;S<=15;S++)if(W<<=1,(W-=V[S])<0)return-1;if(0<W&&(y===0||F!==1))return-1;for(G[1]=0,S=1;S<15;S++)G[S+1]=G[S]+V[S];for(R=0;R<h;R++)m[p+R]!==0&&(b[G[m[p+R]]++]=R);if(A=y===0?(T=ht=b,19):y===1?(T=a,et-=257,ht=o,gt-=257,256):(T=u,ht=g,-1),S=f,I=c,rt=R=B=0,C=-1,E=(tt=1<<(K=Q))-1,y===1&&852<tt||y===2&&592<tt)return 1;for(;;){for(j=S-rt,U=b[R]<A?(O=0,b[R]):b[R]>A?(O=ht[gt+b[R]],T[et+b[R]]):(O=96,0),_=1<<S-rt,f=k=1<<K;v[I+(B>>rt)+(k-=_)]=j<<24|O<<16|U|0,k!==0;);for(_=1<<S-1;B&_;)_>>=1;if(_!==0?(B&=_-1,B+=_):B=0,R++,--V[S]==0){if(S===F)break;S=m[p+b[R]]}if(Q<S&&(B&E)!==C){for(rt===0&&(rt=Q),I+=f,W=1<<(K=S-rt);K+rt<F&&!((W-=V[K+rt])<=0);)K++,W<<=1;if(tt+=1<<K,y===1&&852<tt||y===2&&592<tt)return 1;v[C=B&E]=Q<<24|K<<16|I-c|0}}return B!==0&&(v[I+B]=S-rt<<24|64<<16|0),d.bits=Q,0}},{"../utils/common":41}],51:[function(n,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,r){var s=n("../utils/common"),a=0,o=1;function u(w){for(var z=w.length;0<=--z;)w[z]=0}var g=0,y=29,m=256,p=m+1+y,h=30,v=19,c=2*p+1,b=15,d=16,_=7,k=256,C=16,E=17,I=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(p+2));u(H);var S=new Array(2*h);u(S);var R=new Array(512);u(R);var f=new Array(256);u(f);var F=new Array(y);u(F);var Q,K,rt,W=new Array(h);function tt(w,z,L,M,P){this.static_tree=w,this.extra_bits=z,this.extra_base=L,this.elems=M,this.max_length=P,this.has_stree=w&&w.length}function B(w,z){this.dyn_tree=w,this.max_code=0,this.stat_desc=z}function T(w){return w<256?R[w]:R[256+(w>>>7)]}function et(w,z){w.pending_buf[w.pending++]=255&z,w.pending_buf[w.pending++]=z>>>8&255}function V(w,z,L){w.bi_valid>d-L?(w.bi_buf|=z<<w.bi_valid&65535,et(w,w.bi_buf),w.bi_buf=z>>d-w.bi_valid,w.bi_valid+=L-d):(w.bi_buf|=z<<w.bi_valid&65535,w.bi_valid+=L)}function G(w,z,L){V(w,L[2*z],L[2*z+1])}function ht(w,z){for(var L=0;L|=1&w,w>>>=1,L<<=1,0<--z;);return L>>>1}function gt(w,z,L){var M,P,Z=new Array(b+1),$=0;for(M=1;M<=b;M++)Z[M]=$=$+L[M-1]<<1;for(P=0;P<=z;P++){var q=w[2*P+1];q!==0&&(w[2*P]=ht(Z[q]++,q))}}function it(w){var z;for(z=0;z<p;z++)w.dyn_ltree[2*z]=0;for(z=0;z<h;z++)w.dyn_dtree[2*z]=0;for(z=0;z<v;z++)w.bl_tree[2*z]=0;w.dyn_ltree[2*k]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function at(w){8<w.bi_valid?et(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function yt(w,z,L,M){var P=2*z,Z=2*L;return w[P]<w[Z]||w[P]===w[Z]&&M[z]<=M[L]}function ft(w,z,L){for(var M=w.heap[L],P=L<<1;P<=w.heap_len&&(P<w.heap_len&&yt(z,w.heap[P+1],w.heap[P],w.depth)&&P++,!yt(z,M,w.heap[P],w.depth));)w.heap[L]=w.heap[P],L=P,P<<=1;w.heap[L]=M}function At(w,z,L){var M,P,Z,$,q=0;if(w.last_lit!==0)for(;M=w.pending_buf[w.d_buf+2*q]<<8|w.pending_buf[w.d_buf+2*q+1],P=w.pending_buf[w.l_buf+q],q++,M===0?G(w,P,z):(G(w,(Z=f[P])+m+1,z),($=A[Z])!==0&&V(w,P-=F[Z],$),G(w,Z=T(--M),L),($=j[Z])!==0&&V(w,M-=W[Z],$)),q<w.last_lit;);G(w,k,z)}function St(w,z){var L,M,P,Z=z.dyn_tree,$=z.stat_desc.static_tree,q=z.stat_desc.has_stree,J=z.stat_desc.elems,ut=-1;for(w.heap_len=0,w.heap_max=c,L=0;L<J;L++)Z[2*L]!==0?(w.heap[++w.heap_len]=ut=L,w.depth[L]=0):Z[2*L+1]=0;for(;w.heap_len<2;)Z[2*(P=w.heap[++w.heap_len]=ut<2?++ut:0)]=1,w.depth[P]=0,w.opt_len--,q&&(w.static_len-=$[2*P+1]);for(z.max_code=ut,L=w.heap_len>>1;1<=L;L--)ft(w,Z,L);for(P=J;L=w.heap[1],w.heap[1]=w.heap[w.heap_len--],ft(w,Z,1),M=w.heap[1],w.heap[--w.heap_max]=L,w.heap[--w.heap_max]=M,Z[2*P]=Z[2*L]+Z[2*M],w.depth[P]=(w.depth[L]>=w.depth[M]?w.depth[L]:w.depth[M])+1,Z[2*L+1]=Z[2*M+1]=P,w.heap[1]=P++,ft(w,Z,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(st,Et){var ce,Ot,he,dt,Pe,hn,Pt=Et.dyn_tree,or=Et.max_code,ui=Et.stat_desc.static_tree,li=Et.stat_desc.has_stree,ci=Et.stat_desc.extra_bits,ur=Et.stat_desc.extra_base,fe=Et.stat_desc.max_length,Te=0;for(dt=0;dt<=b;dt++)st.bl_count[dt]=0;for(Pt[2*st.heap[st.heap_max]+1]=0,ce=st.heap_max+1;ce<c;ce++)fe<(dt=Pt[2*Pt[2*(Ot=st.heap[ce])+1]+1]+1)&&(dt=fe,Te++),Pt[2*Ot+1]=dt,or<Ot||(st.bl_count[dt]++,Pe=0,ur<=Ot&&(Pe=ci[Ot-ur]),hn=Pt[2*Ot],st.opt_len+=hn*(dt+Pe),li&&(st.static_len+=hn*(ui[2*Ot+1]+Pe)));if(Te!==0){do{for(dt=fe-1;st.bl_count[dt]===0;)dt--;st.bl_count[dt]--,st.bl_count[dt+1]+=2,st.bl_count[fe]--,Te-=2}while(0<Te);for(dt=fe;dt!==0;dt--)for(Ot=st.bl_count[dt];Ot!==0;)or<(he=st.heap[--ce])||(Pt[2*he+1]!==dt&&(st.opt_len+=(dt-Pt[2*he+1])*Pt[2*he],Pt[2*he+1]=dt),Ot--)}}(w,z),gt(Z,ut,w.bl_count)}function l(w,z,L){var M,P,Z=-1,$=z[1],q=0,J=7,ut=4;for($===0&&(J=138,ut=3),z[2*(L+1)+1]=65535,M=0;M<=L;M++)P=$,$=z[2*(M+1)+1],++q<J&&P===$||(q<ut?w.bl_tree[2*P]+=q:P!==0?(P!==Z&&w.bl_tree[2*P]++,w.bl_tree[2*C]++):q<=10?w.bl_tree[2*E]++:w.bl_tree[2*I]++,Z=P,ut=(q=0)===$?(J=138,3):P===$?(J=6,3):(J=7,4))}function N(w,z,L){var M,P,Z=-1,$=z[1],q=0,J=7,ut=4;for($===0&&(J=138,ut=3),M=0;M<=L;M++)if(P=$,$=z[2*(M+1)+1],!(++q<J&&P===$)){if(q<ut)for(;G(w,P,w.bl_tree),--q!=0;);else P!==0?(P!==Z&&(G(w,P,w.bl_tree),q--),G(w,C,w.bl_tree),V(w,q-3,2)):q<=10?(G(w,E,w.bl_tree),V(w,q-3,3)):(G(w,I,w.bl_tree),V(w,q-11,7));Z=P,ut=(q=0)===$?(J=138,3):P===$?(J=6,3):(J=7,4)}}u(W);var D=!1;function x(w,z,L,M){V(w,(g<<1)+(M?1:0),3),function(P,Z,$,q){at(P),q&&(et(P,$),et(P,~$)),s.arraySet(P.pending_buf,P.window,Z,$,P.pending),P.pending+=$}(w,z,L,!0)}r._tr_init=function(w){D||(function(){var z,L,M,P,Z,$=new Array(b+1);for(P=M=0;P<y-1;P++)for(F[P]=M,z=0;z<1<<A[P];z++)f[M++]=P;for(f[M-1]=P,P=Z=0;P<16;P++)for(W[P]=Z,z=0;z<1<<j[P];z++)R[Z++]=P;for(Z>>=7;P<h;P++)for(W[P]=Z<<7,z=0;z<1<<j[P]-7;z++)R[256+Z++]=P;for(L=0;L<=b;L++)$[L]=0;for(z=0;z<=143;)H[2*z+1]=8,z++,$[8]++;for(;z<=255;)H[2*z+1]=9,z++,$[9]++;for(;z<=279;)H[2*z+1]=7,z++,$[7]++;for(;z<=287;)H[2*z+1]=8,z++,$[8]++;for(gt(H,p+1,$),z=0;z<h;z++)S[2*z+1]=5,S[2*z]=ht(z,5);Q=new tt(H,A,m+1,p,b),K=new tt(S,j,0,h,b),rt=new tt(new Array(0),O,0,v,_)}(),D=!0),w.l_desc=new B(w.dyn_ltree,Q),w.d_desc=new B(w.dyn_dtree,K),w.bl_desc=new B(w.bl_tree,rt),w.bi_buf=0,w.bi_valid=0,it(w)},r._tr_stored_block=x,r._tr_flush_block=function(w,z,L,M){var P,Z,$=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=function(q){var J,ut=4093624447;for(J=0;J<=31;J++,ut>>>=1)if(1&ut&&q.dyn_ltree[2*J]!==0)return a;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return o;for(J=32;J<m;J++)if(q.dyn_ltree[2*J]!==0)return o;return a}(w)),St(w,w.l_desc),St(w,w.d_desc),$=function(q){var J;for(l(q,q.dyn_ltree,q.l_desc.max_code),l(q,q.dyn_dtree,q.d_desc.max_code),St(q,q.bl_desc),J=v-1;3<=J&&q.bl_tree[2*U[J]+1]===0;J--);return q.opt_len+=3*(J+1)+5+5+4,J}(w),P=w.opt_len+3+7>>>3,(Z=w.static_len+3+7>>>3)<=P&&(P=Z)):P=Z=L+5,L+4<=P&&z!==-1?x(w,z,L,M):w.strategy===4||Z===P?(V(w,2+(M?1:0),3),At(w,H,S)):(V(w,4+(M?1:0),3),function(q,J,ut,st){var Et;for(V(q,J-257,5),V(q,ut-1,5),V(q,st-4,4),Et=0;Et<st;Et++)V(q,q.bl_tree[2*U[Et]+1],3);N(q,q.dyn_ltree,J-1),N(q,q.dyn_dtree,ut-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,$+1),At(w,w.dyn_ltree,w.dyn_dtree)),it(w),M&&at(w)},r._tr_tally=function(w,z,L){return w.pending_buf[w.d_buf+2*w.last_lit]=z>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&z,w.pending_buf[w.l_buf+w.last_lit]=255&L,w.last_lit++,z===0?w.dyn_ltree[2*L]++:(w.matches++,z--,w.dyn_ltree[2*(f[L]+m+1)]++,w.dyn_dtree[2*T(z)]++),w.last_lit===w.lit_bufsize-1},r._tr_align=function(w){V(w,2,3),G(w,k,H),function(z){z.bi_valid===16?(et(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(w)}},{"../utils/common":41}],53:[function(n,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,r){(function(s){(function(a,o){if(!a.setImmediate){var u,g,y,m,p=1,h={},v=!1,c=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,u={}.toString.call(a.process)==="[object process]"?function(C){process.nextTick(function(){_(C)})}:function(){if(a.postMessage&&!a.importScripts){var C=!0,E=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=E,C}}()?(m="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(C){a.postMessage(m+C,"*")}):a.MessageChannel?((y=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){y.port2.postMessage(C)}):c&&"onreadystatechange"in c.createElement("script")?(g=c.documentElement,function(C){var E=c.createElement("script");E.onreadystatechange=function(){_(C),E.onreadystatechange=null,g.removeChild(E),E=null},g.appendChild(E)}):function(C){setTimeout(_,0,C)},b.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var E=new Array(arguments.length-1),I=0;I<E.length;I++)E[I]=arguments[I+1];var A={callback:C,args:E};return h[p]=A,u(p),p++},b.clearImmediate=d}function d(C){delete h[C]}function _(C){if(v)setTimeout(_,0,C);else{var E=h[C];if(E){v=!0;try{(function(I){var A=I.callback,j=I.args;switch(j.length){case 0:A();break;case 1:A(j[0]);break;case 2:A(j[0],j[1]);break;case 3:A(j[0],j[1],j[2]);break;default:A.apply(o,j)}})(E)}finally{d(C),v=!1}}}}function k(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(m)===0&&_(+C.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Re<"u"?Re:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(zr);var Ai=zr.exports,Oi=Ci(Ai),kr;const kn=((kr=globalThis.__sveltekit_1p7ftr0)==null?void 0:kr.base)??"/Planetiler_MapLibre_Sveltekit";var xr;(xr=globalThis.__sveltekit_1p7ftr0)==null||xr.assets;const lt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pt=Object.keys,bt=Array.isArray;function wt(e,t){return typeof t!="object"||pt(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||lt.Promise||(lt.Promise=Promise);const we=Object.getPrototypeOf,Ii={}.hasOwnProperty;function xt(e,t){return Ii.call(e,t)}function oe(e,t){typeof t=="function"&&(t=t(we(e))),(typeof Reflect>"u"?pt:Reflect.ownKeys)(t).forEach(n=>{jt(e,n,t[n])})}const Pr=Object.defineProperty;function jt(e,t,n,i){Pr(e,t,wt(n&&xt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function ie(e){return{from:function(t){return e.prototype=Object.create(t.prototype),jt(e.prototype,"constructor",e),{extend:oe.bind(null,e.prototype)}}}}const zi=Object.getOwnPropertyDescriptor;function $n(e,t){let n;return zi(e,t)||(n=we(e))&&$n(n,t)}const Pi=[].slice;function tn(e,t,n){return Pi.call(e,t,n)}function Tr(e,t){return t(e)}function pe(e){if(!e)throw new Error("Assertion Failed")}function Br(e){lt.setImmediate?setImmediate(e):setTimeout(e,0)}function Rr(e,t){return e.reduce((n,i,r)=>{var s=t(i,r);return s&&(n[s[0]]=s[1]),n},{})}function Ft(e,t){if(xt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,r=t.length;i<r;++i){var s=Ft(e,t[i]);n.push(s)}return n}var a=t.indexOf(".");if(a!==-1){var o=e[t.substr(0,a)];return o===void 0?void 0:Ft(o,t.substr(a+1))}}function Ct(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){pe(typeof n!="string"&&"length"in n);for(var i=0,r=t.length;i<r;++i)Ct(e,t[i],n[i])}else{var s=t.indexOf(".");if(s!==-1){var a=t.substr(0,s),o=t.substr(s+1);if(o==="")n===void 0?bt(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];u&&xt(e,a)||(u=e[a]={}),Ct(u,o,n)}}else n===void 0?bt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Dr(e){var t={};for(var n in e)xt(e,n)&&(t[n]=e[n]);return t}const Ti=[].concat;function jr(e){return Ti.apply([],e)}const Fr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(jr([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>lt[e]),Bi=Fr.map(e=>lt[e]);Rr(Fr,e=>[e,!0]);let Ut=null;function Oe(e){Ut=typeof WeakMap<"u"&&new WeakMap;const t=xn(e);return Ut=null,t}function xn(e){if(!e||typeof e!="object")return e;let t=Ut&&Ut.get(e);if(t)return t;if(bt(e)){t=[],Ut&&Ut.set(e,t);for(var n=0,i=e.length;n<i;++n)t.push(xn(e[n]))}else if(Bi.indexOf(e.constructor)>=0)t=e;else{const s=we(e);for(var r in t=s===Object.prototype?{}:Object.create(s),Ut&&Ut.set(e,t),e)xt(e,r)&&(t[r]=xn(e[r]))}return t}const{toString:Ri}={};function En(e){return Ri.call(e).slice(8,-1)}const Sn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Di=typeof Sn=="symbol"?function(e){var t;return e!=null&&(t=e[Sn])&&t.apply(e)}:function(){return null},re={};function Rt(e){var t,n,i,r;if(arguments.length===1){if(bt(e))return e.slice();if(this===re&&typeof e=="string")return[e];if(r=Di(e)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Yn=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var zt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Nr(e,t){zt=e,Kr=t}var Kr=()=>!0;const ji=!new Error("").stack;function Qt(){if(ji)try{throw Qt.arguments,new Error}catch(e){return e}return new Error}function Cn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Kr).map(i=>`
`+i).join("")):""}var Ur=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ur),Fi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function se(e,t){this._e=Qt(),this.name=e,this.message=t}function Lr(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,i,r)=>r.indexOf(n)===i).join(`
`)}function en(e,t,n,i){this._e=Qt(),this.failures=t,this.failedKeys=i,this.successCount=n,this.message=Lr(e,t)}function ye(e,t){this._e=Qt(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Lr(e,t)}ie(se).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Cn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ie(en).from(se),ie(ye).from(se);var Jn=Xn.reduce((e,t)=>(e[t]=t+"Error",e),{});const Ni=se;var nt=Xn.reduce((e,t)=>{var n=t+"Error";function i(r,s){this._e=Qt(),this.name=n,r?typeof r=="string"?(this.message=`${r}${s?`
 `+s:""}`,this.inner=s||null):typeof r=="object"&&(this.message=`${r.name} ${r.message}`,this.inner=r):(this.message=Fi[t]||n,this.inner=null)}return ie(i).from(Ni),e[t]=i,e},{});nt.Syntax=SyntaxError,nt.Type=TypeError,nt.Range=RangeError;var cr=Ur.reduce((e,t)=>(e[t+"Error"]=nt[t],e),{}),Ze=Xn.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=nt[t]),e),{});function ot(){}function ke(e){return e}function Ki(e,t){return e==null||e===ke?t:function(n){return t(e(n))}}function Xt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ui(e,t){return e===ot?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Xt(i,this.onsuccess):i),r&&(this.onerror=this.onerror?Xt(r,this.onerror):r),s!==void 0?s:n}}function Li(e,t){return e===ot?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xt(n,this.onsuccess):n),i&&(this.onerror=this.onerror?Xt(i,this.onerror):i)}}function Mi(e,t){return e===ot?t:function(n){var i=e.apply(this,arguments);wt(n,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xt(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Xt(s,this.onerror):s),i===void 0?a===void 0?void 0:a:wt(i,a)}}function Wi(e,t){return e===ot?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Qn(e,t){return e===ot?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return n.then(function(){return t.apply(i,s)})}return t.apply(this,arguments)}}Ze.ModifyError=en,Ze.DexieError=se,Ze.BulkError=ye;var xe={};const Mr=100,[An,nn,On]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,we(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,we(t),e]})(),Wr=nn&&nn.then,qe=An&&An.constructor,tr=!!On;var In=!1,Zi=On?()=>{On.then(je)}:lt.setImmediate?setImmediate.bind(null,je):lt.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{je(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(je,0)},ge=function(e,t){me.push([e,t]),rn&&(Zi(),rn=!1)},zn=!0,rn=!0,Vt=[],He=[],Pn=null,Tn=ke,ae={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{dr(e[0],e[1])}catch{}})}},X=ae,me=[],$t=0,Ge=[];function Y(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ot,this._lib=!1;var t=this._PSD=X;if(zt&&(this._stackHolder=Qt(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==xe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Rn(this,this._value))}this._state=null,this._value=null,++t.ref,qr(this,e)}const Bn={get:function(){var e=X,t=sn;function n(i,r){var s=!e.global&&(e!==X||t!==sn);const a=s&&!Nt();var o=new Y((u,g)=>{er(this,new Zr(an(i,e,s,a),an(r,e,s,a),u,g,e))});return zt&&Vr(o,this),o}return n.prototype=xe,n},set:function(e){jt(this,"then",e&&e.prototype===xe?Bn:{get:function(){return e},set:Bn.set})}};function Zr(e,t,n,i,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=r}function qr(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&Ie();n&&typeof n.then=="function"?qr(e,(r,s)=>{n instanceof Y?n._then(r,s):n.then(r,s)}):(e._state=!0,e._value=n,Hr(e)),i&&ze()}},Rn.bind(null,e))}catch(n){Rn(e,n)}}function Rn(e,t){if(He.push(t),e._state===null){var n=e._lib&&Ie();t=Tn(t),e._state=!1,e._value=t,zt&&t!==null&&typeof t=="object"&&!t._promise&&function(i,r,s){try{i.apply(null,s)}catch(a){r&&r(a)}}(()=>{var i=$n(t,"stack");t._promise=e,jt(t,"stack",{get:()=>In?i&&(i.get?i.get.apply(t):i.value):e.stack})}),function(i){Vt.some(r=>r._value===i._value)||Vt.push(i)}(e),Hr(e),n&&ze()}}function Hr(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)er(e,t[n]);var r=e._PSD;--r.ref||r.finalize(),$t===0&&(++$t,ge(()=>{--$t==0&&nr()},[]))}function er(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++$t,ge(qi,[n,e,t])}else e._listeners.push(t)}function qi(e,t,n){try{Pn=t;var i,r=t._value;t._state?i=e(r):(He.length&&(He=[]),i=e(r),He.indexOf(r)===-1&&function(s){for(var a=Vt.length;a;)if(Vt[--a]._value===s._value)return void Vt.splice(a,1)}(t)),n.resolve(i)}catch(s){n.reject(s)}finally{Pn=null,--$t==0&&nr(),--n.psd.ref||n.psd.finalize()}}function Gr(e,t,n){if(t.length===n)return t;var i="";if(e._state===!1){var r,s,a=e._value;a!=null?(r=a.name||"Error",s=a.message||a,i=Cn(a,0)):(r=a,s=""),t.push(r+(s?": "+s:"")+i)}return zt&&((i=Cn(e._stackHolder,2))&&t.indexOf(i)===-1&&t.push(i),e._prev&&Gr(e._prev,t,n)),t}function Vr(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function je(){Ie()&&ze()}function Ie(){var e=zn;return zn=!1,rn=!1,e}function ze(){var e,t,n;do for(;me.length>0;)for(e=me,me=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(me.length>0);zn=!0,rn=!0}function nr(){var e=Vt;Vt=[],e.forEach(i=>{i._PSD.onunhandled.call(null,i._value,i)});for(var t=Ge.slice(0),n=t.length;n;)t[--n]()}function Fe(e){return new Y(xe,!1,e)}function ct(e,t){var n=X;return function(){var i=Ie(),r=X;try{return Wt(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Wt(r,!1),i&&ze()}}}oe(Y.prototype,{then:Bn,_then:function(e,t){er(this,new Zr(null,null,e,t,X))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,i=>i instanceof t?n(i):Fe(i)):this.then(null,i=>i&&i.name===t?n(i):Fe(i))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Fe(t)))},stack:{get:function(){if(this._stack)return this._stack;try{In=!0;var e=Gr(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{In=!1}}},timeout:function(e,t){return e<1/0?new Y((n,i)=>{var r=setTimeout(()=>i(new nt.Timeout(t)),e);this.then(n,i).finally(clearTimeout.bind(null,r))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&jt(Y.prototype,Symbol.toStringTag,"Dexie.Promise"),ae.env=$r(),oe(Y,{all:function(){var e=Rt.apply(null,arguments).map(Ne);return new Y(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach((r,s)=>Y.resolve(r).then(a=>{e[s]=a,--i||t(e)},n))})},resolve:e=>{if(e instanceof Y)return e;if(e&&typeof e.then=="function")return new Y((n,i)=>{e.then(n,i)});var t=new Y(xe,!0,e);return Vr(t,Pn),t},reject:Fe,race:function(){var e=Rt.apply(null,arguments).map(Ne);return new Y((t,n)=>{e.map(i=>Y.resolve(i).then(t,n))})},PSD:{get:()=>X,set:e=>X=e},totalEchoes:{get:()=>sn},newPSD:Mt,usePSD:le,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>Tn,set:e=>{Tn=e}},follow:(e,t)=>new Y((n,i)=>Mt((r,s)=>{var a=X;a.unhandleds=[],a.onunhandled=s,a.finalize=Xt(function(){(function(o){function u(){o(),Ge.splice(Ge.indexOf(u),1)}Ge.push(u),++$t,ge(()=>{--$t==0&&nr()},[])})(()=>{this.unhandleds.length===0?r():s(this.unhandleds[0])})},a.finalize),e()},t,n,i))}),qe&&(qe.allSettled&&jt(Y,"allSettled",function(){const e=Rt.apply(null,arguments).map(Ne);return new Y(t=>{e.length===0&&t([]);let n=e.length;const i=new Array(n);e.forEach((r,s)=>Y.resolve(r).then(a=>i[s]={status:"fulfilled",value:a},a=>i[s]={status:"rejected",reason:a}).then(()=>--n||t(i)))})}),qe.any&&typeof AggregateError<"u"&&jt(Y,"any",function(){const e=Rt.apply(null,arguments).map(Ne);return new Y((t,n)=>{e.length===0&&n(new AggregateError([]));let i=e.length;const r=new Array(i);e.forEach((s,a)=>Y.resolve(s).then(o=>t(o),o=>{r[a]=o,--i||n(new AggregateError(r))}))})}));const _t={awaits:0,echoes:0,id:0};var Hi=0,Ve=[],pn=0,sn=0,Gi=0;function Mt(e,t,n,i){var r=X,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++Gi;var a=ae.env;s.env=tr?{Promise:Y,PromiseProp:{value:Y,configurable:!0,writable:!0},all:Y.all,race:Y.race,allSettled:Y.allSettled,any:Y.any,resolve:Y.resolve,reject:Y.reject,nthen:hr(a.nthen,s),gthen:hr(a.gthen,s)}:{},t&&wt(s,t),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=le(s,e,n,i);return s.ref===0&&s.finalize(),o}function ue(){return _t.id||(_t.id=++Hi),++_t.awaits,_t.echoes+=Mr,_t.id}function Nt(){return!!_t.awaits&&(--_t.awaits==0&&(_t.id=0),_t.echoes=_t.awaits*Mr,!0)}function Ne(e){return _t.echoes&&e&&e.constructor===qe?(ue(),e.then(t=>(Nt(),t),t=>(Nt(),mt(t)))):e}function Vi(e){++sn,_t.echoes&&--_t.echoes!=0||(_t.echoes=_t.id=0),Ve.push(X),Wt(e,!0)}function $i(){var e=Ve[Ve.length-1];Ve.pop(),Wt(e,!1)}function Wt(e,t){var n=X;if((t?!_t.echoes||pn++&&e===X:!pn||--pn&&e===X)||Yr(t?Vi.bind(null,e):$i),e!==X&&(X=e,n===ae&&(ae.env=$r()),tr)){var i=ae.env.Promise,r=e.env;nn.then=r.nthen,i.prototype.then=r.gthen,(n.global||e.global)&&(Object.defineProperty(lt,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function $r(){var e=lt.Promise;return tr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(lt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:nn.then,gthen:e.prototype.then}:{}}function le(e,t,n,i,r){var s=X;try{return Wt(e,!0),t(n,i,r)}finally{Wt(s,!1)}}function Yr(e){Wr.call(An,e)}function an(e,t,n,i){return typeof e!="function"?e:function(){var r=X;n&&ue(),Wt(t,!0);try{return e.apply(this,arguments)}finally{Wt(r,!1),i&&Yr(Nt)}}}function hr(e,t){return function(n,i){return e.call(this,an(n,t),an(i,t))}}(""+Wr).indexOf("[native code]")===-1&&(ue=Nt=ot);const fr="unhandledrejection";function dr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var i,r={promise:t,reason:e};if(lt.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(fr,!0,!0),wt(i,r)):lt.CustomEvent&&wt(i=new CustomEvent(fr,{detail:r}),r),i&&lt.dispatchEvent&&(dispatchEvent(i),!lt.PromiseRejectionEvent&&lt.onunhandledrejection))try{lt.onunhandledrejection(i)}catch{}zt&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var mt=Y.reject;function Dn(e,t,n,i){if(e.idbdb&&(e._state.openComplete||X.letThrough||e._vip)){var r=e._createTransaction(t,n,e._dbSchema);try{r.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Dn(e,t,n,i))):mt(s)}return r._promise(t,(s,a)=>Mt(()=>(X.trans=r,i(s,a,r)))).then(s=>r._completion.then(()=>s))}if(e._state.openComplete)return mt(new nt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return mt(new nt.DatabaseClosed);e.open().catch(ot)}return e._state.dbReadyPromise.then(()=>Dn(e,t,n,i))}const pr="3.2.4",Gt=String.fromCharCode(65535),jn=-1/0,Tt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xr="String expected.",_e=[],ln=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Yi=ln,Xi=ln,Jr=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),cn="__dbnames",mn="readonly",yn="readwrite";function Jt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Qr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ke(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=Oe(t))[e],t)}class Ji{_trans(t,n,i){const r=this._tx||X.trans,s=this.name;function a(u,g,y){if(!y.schema[s])throw new nt.NotFound("Table "+s+" not part of transaction");return n(y.idbtrans,y)}const o=Ie();try{return r&&r.db===this.db?r===X.trans?r._promise(t,a,i):Mt(()=>r._promise(t,a,i),{trans:r,transless:X.transless||X}):Dn(this.db,t,[this.name],a)}finally{o&&ze()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",i=>this.core.get({trans:i,key:t}).then(r=>this.hook.reading.fire(r))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(bt(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=pt(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const i=this.schema.indexes.concat(this.schema.primKey).filter(g=>g.compound&&n.every(y=>g.keyPath.indexOf(y)>=0)&&g.keyPath.every(y=>n.indexOf(y)>=0))[0];if(i&&this.db._maxKey!==Gt)return this.where(i.name).equals(i.keyPath.map(g=>t[g]));!i&&zt&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function a(g,y){try{return s.cmp(g,y)===0}catch{return!1}}const[o,u]=n.reduce(([g,y],m)=>{const p=r[m],h=t[m];return[g||p,g||!p?Jt(y,p&&p.multi?v=>{const c=Ft(v,m);return bt(c)&&c.some(b=>a(h,b))}:v=>a(h,Ft(v,m))):y]},[null,null]);return o?this.where(o.name).equals(t[o.keyPath]).filter(u):i?this.filter(u):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,bt(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=i=>{if(!i)return i;const r=Object.create(t.prototype);for(var s in i)if(xt(i,s))try{r[s]=i[s]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){wt(this,t)})}add(t,n){const{auto:i,keyPath:r}=this.schema.primKey;let s=t;return r&&i&&(s=Ke(r)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?Y.reject(a.failures[0]):a.lastResult).then(a=>{if(r)try{Ct(t,r,a)}catch{}return a})}update(t,n){if(typeof t!="object"||bt(t))return this.where(":id").equals(t).modify(n);{const i=Ft(t,this.schema.primKey.keyPath);if(i===void 0)return mt(new nt.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?pt(n).forEach(r=>{Ct(t,r,n[r])}):n(t,{value:t,primKey:i})}catch{}return this.where(":id").equals(i).modify(n)}}put(t,n){const{auto:i,keyPath:r}=this.schema.primKey;let s=t;return r&&i&&(s=Ke(r)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?Y.reject(a.failures[0]):a.lastResult).then(a=>{if(r)try{Ct(t,r,a)}catch{}return a})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?Y.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:Qr})).then(t=>t.numFailures?Y.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(i=>i.map(r=>this.hook.reading.fire(r))))}bulkAdd(t,n,i){const r=Array.isArray(n)?n:void 0,s=(i=i||(r?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:u}=this.schema.primKey;if(u&&r)throw new nt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new nt.InvalidArgument("Arguments objects and keys must have the same length");const g=t.length;let y=u&&o?t.map(Ke(u)):t;return this.core.mutate({trans:a,type:"add",keys:r,values:y,wantResults:s}).then(({numFailures:m,results:p,lastResult:h,failures:v})=>{if(m===0)return s?p:h;throw new ye(`${this.name}.bulkAdd(): ${m} of ${g} operations failed`,v)})})}bulkPut(t,n,i){const r=Array.isArray(n)?n:void 0,s=(i=i||(r?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:u}=this.schema.primKey;if(u&&r)throw new nt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new nt.InvalidArgument("Arguments objects and keys must have the same length");const g=t.length;let y=u&&o?t.map(Ke(u)):t;return this.core.mutate({trans:a,type:"put",keys:r,values:y,wantResults:s}).then(({numFailures:m,results:p,lastResult:h,failures:v})=>{if(m===0)return s?p:h;throw new ye(`${this.name}.bulkPut(): ${m} of ${g} operations failed`,v)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",i=>this.core.mutate({trans:i,type:"delete",keys:t})).then(({numFailures:i,lastResult:r,failures:s})=>{if(i===0)return r;throw new ye(`${this.name}.bulkDelete(): ${i} of ${n} operations failed`,s)})}}function be(e){var t={},n=function(a,o){if(o){for(var u=arguments.length,g=new Array(u-1);--u;)g[u-1]=arguments[u];return t[a].subscribe.apply(null,g),e}if(typeof a=="string")return t[a]};n.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return n;function s(a,o,u){if(typeof a!="object"){var g;o||(o=Wi),u||(u=ot);var y={subscribers:[],fire:u,subscribe:function(m){y.subscribers.indexOf(m)===-1&&(y.subscribers.push(m),y.fire=o(y.fire,m))},unsubscribe:function(m){y.subscribers=y.subscribers.filter(function(p){return p!==m}),y.fire=y.subscribers.reduce(o,u)}};return t[a]=n[a]=y,y}pt(g=a).forEach(function(m){var p=g[m];if(bt(p))s(m,g[m][0],g[m][1]);else{if(p!=="asap")throw new nt.InvalidArgument("Invalid event config");var h=s(m,ke,function(){for(var v=arguments.length,c=new Array(v);v--;)c[v]=arguments[v];h.subscribers.forEach(function(b){Br(function(){b.apply(null,c)})})})}})}}function de(e,t){return ie(t).from({prototype:e}),t}function te(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function gn(e,t){e.filter=Jt(e.filter,t)}function _n(e,t,n){var i=e.replayFilter;e.replayFilter=i?()=>Jt(i(),t()):t,e.justLimit=n&&!i}function $e(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new nt.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function mr(e,t,n){const i=$e(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function Ue(e,t,n,i){const r=e.replayFilter?Jt(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},a=(o,u,g)=>{if(!r||r(u,g,p=>u.stop(p),p=>u.fail(p))){var y=u.primaryKey,m=""+y;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(y)),xt(s,m)||(s[m]=!0,t(o,u,g))}};return Promise.all([e.or._iterate(a,n),yr(mr(e,i,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return yr(mr(e,i,n),Jt(e.algorithm,r),t,!e.keysOnly&&e.valueMapper)}function yr(e,t,n,i){var r=ct(i?(s,a,o)=>n(i(s),a,o):n);return e.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();t&&!t(s,o=>a=o,o=>{s.stop(o),a=ot},o=>{s.fail(o),a=ot})||r(s.value,s,o=>a=o),a()})})}function vt(e,t){try{const n=gr(e),i=gr(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(r,s){const a=r.length,o=s.length,u=a<o?a:o;for(let g=0;g<u;++g)if(r[g]!==s[g])return r[g]<s[g]?-1:1;return a===o?0:a<o?-1:1}(_r(e),_r(t));case"Array":return function(r,s){const a=r.length,o=s.length,u=a<o?a:o;for(let g=0;g<u;++g){const y=vt(r[g],s[g]);if(y!==0)return y}return a===o?0:a<o?-1:1}(e,t)}}catch{}return NaN}function gr(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=En(e);return n==="ArrayBuffer"?"binary":n}function _r(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Qi{_read(t,n){var i=this._ctx;return i.error?i.table._trans(null,mt.bind(null,i.error)):i.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,mt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Jt(n.algorithm,t)}_iterate(t,n){return Ue(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return t&&wt(i,t),n._ctx=i,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(i=>Ue(n,t,i,n.table.core))}count(t){return this._read(n=>{const i=this._ctx,r=i.table.core;if(te(i,!0))return r.count({trans:n,query:{index:$e(i,r.schema),range:i.range}}).then(a=>Math.min(a,i.limit));var s=0;return Ue(i,()=>(++s,!1),n,r).then(()=>s)}).then(t)}sortBy(t,n){const i=t.split(".").reverse(),r=i[0],s=i.length-1;function a(g,y){return y?a(g[i[y]],y-1):g[r]}var o=this._ctx.dir==="next"?1:-1;function u(g,y){var m=a(g,s),p=a(y,s);return m<p?-o:m>p?o:0}return this.toArray(function(g){return g.sort(u)}).then(n)}toArray(t){return this._read(n=>{var i=this._ctx;if(i.dir==="next"&&te(i,!0)&&i.limit>0){const{valueMapper:r}=i,s=$e(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(({result:a})=>r?a.map(r):a)}{const r=[];return Ue(i,s=>r.push(s),n,i.table.core).then(()=>r)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,te(n)?_n(n,()=>{var i=t;return(r,s)=>i===0||(i===1?(--i,!1):(s(()=>{r.advance(i),i=0}),!1))}):_n(n,()=>{var i=t;return()=>--i<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),_n(this._ctx,()=>{var n=t;return function(i,r,s){return--n<=0&&r(s),n>=0}},!0),this}until(t,n){return gn(this._ctx,function(i,r,s){return!t(i.value)||(r(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,i;return gn(this._ctx,function(r){return t(r.value)}),n=this._ctx,i=t,n.isMatch=Jt(n.isMatch,i),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,r){t(r.key,r)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,r){t(r.primaryKey,r)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(r,s){i.push(s.key)}).then(function(){return i}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&te(n,!0)&&n.limit>0)return this._read(r=>{var s=$e(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:r})=>r).then(t);n.keysOnly=!n.isMatch;var i=[];return this.each(function(r,s){i.push(s.primaryKey)}).then(function(){return i}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var i={};return gn(this._ctx,function(r){var s=r.primaryKey.toString(),a=xt(i,s);return i[s]=!0,!a}),this}modify(t){var n=this._ctx;return this._write(i=>{var r;if(typeof t=="function")r=t;else{var s=pt(t),a=s.length;r=function(c){for(var b=!1,d=0;d<a;++d){var _=s[d],k=t[_];Ft(c,_)!==k&&(Ct(c,_,k),b=!0)}return b}}const o=n.table.core,{outbound:u,extractKey:g}=o.schema.primaryKey,y=this.db._options.modifyChunkSize||200,m=[];let p=0;const h=[],v=(c,b)=>{const{failures:d,numFailures:_}=b;p+=c-_;for(let k of pt(d))m.push(d[k])};return this.clone().primaryKeys().then(c=>{const b=d=>{const _=Math.min(y,c.length-d);return o.getMany({trans:i,keys:c.slice(d,d+_),cache:"immutable"}).then(k=>{const C=[],E=[],I=u?[]:null,A=[];for(let O=0;O<_;++O){const U=k[O],H={value:Oe(U),primKey:c[d+O]};r.call(H,H.value,H)!==!1&&(H.value==null?A.push(c[d+O]):u||vt(g(U),g(H.value))===0?(E.push(H.value),u&&I.push(c[d+O])):(A.push(c[d+O]),C.push(H.value)))}const j=te(n)&&n.limit===1/0&&(typeof t!="function"||t===bn)&&{index:n.index,range:n.range};return Promise.resolve(C.length>0&&o.mutate({trans:i,type:"add",values:C}).then(O=>{for(let U in O.failures)A.splice(parseInt(U),1);v(C.length,O)})).then(()=>(E.length>0||j&&typeof t=="object")&&o.mutate({trans:i,type:"put",keys:I,values:E,criteria:j,changeSpec:typeof t!="function"&&t}).then(O=>v(E.length,O))).then(()=>(A.length>0||j&&t===bn)&&o.mutate({trans:i,type:"delete",keys:A,criteria:j}).then(O=>v(A.length,O))).then(()=>c.length>d+_&&b(d+y))})};return b(0).then(()=>{if(m.length>0)throw new en("Error modifying one or more objects",m,p,h);return c.length})})})}delete(){var t=this._ctx,n=t.range;return te(t)&&(t.isPrimKey&&!Xi||n.type===3)?this._write(i=>{const{primaryKey:r}=t.table.core.schema,s=n;return t.table.core.count({trans:i,query:{index:r,range:s}}).then(a=>t.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(({failures:o,lastResult:u,results:g,numFailures:y})=>{if(y)throw new en("Could not delete some values",Object.keys(o).map(m=>o[m]),a-y);return a-y}))}):this.modify(bn)}}const bn=(e,t)=>t.value=null;function ts(e,t){return e<t?-1:e===t?0:1}function es(e,t){return e>t?-1:e===t?0:1}function kt(e,t,n){var i=e instanceof ei?new e.Collection(e):e;return i._ctx.error=n?new n(t):new TypeError(t),i}function ee(e){return new e.Collection(e,()=>ti("")).limit(0)}function ns(e,t,n,i,r,s){for(var a=Math.min(e.length,i.length),o=-1,u=0;u<a;++u){var g=t[u];if(g!==i[u])return r(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):r(e[u],i[u])<0?e.substr(0,u)+i[u]+n.substr(u+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;r(e[u],g)<0&&(o=u)}return a<i.length&&s==="next"?e+n.substr(e.length):a<e.length&&s==="prev"?e.substr(0,n.length):o<0?null:e.substr(0,o)+i[o]+n.substr(o+1)}function Le(e,t,n,i){var r,s,a,o,u,g,y,m=n.length;if(!n.every(c=>typeof c=="string"))return kt(e,Xr);function p(c){r=function(d){return d==="next"?_=>_.toUpperCase():_=>_.toLowerCase()}(c),s=function(d){return d==="next"?_=>_.toLowerCase():_=>_.toUpperCase()}(c),a=c==="next"?ts:es;var b=n.map(function(d){return{lower:s(d),upper:r(d)}}).sort(function(d,_){return a(d.lower,_.lower)});o=b.map(function(d){return d.upper}),u=b.map(function(d){return d.lower}),g=c,y=c==="next"?"":i}p("next");var h=new e.Collection(e,()=>Kt(o[0],u[m-1]+i));h._ondirectionchange=function(c){p(c)};var v=0;return h._addAlgorithm(function(c,b,d){var _=c.key;if(typeof _!="string")return!1;var k=s(_);if(t(k,u,v))return!0;for(var C=null,E=v;E<m;++E){var I=ns(_,k,o[E],u[E],a,g);I===null&&C===null?v=E+1:(C===null||a(C,I)>0)&&(C=I)}return b(C!==null?function(){c.continue(C+y)}:d),!1}),h}function Kt(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function ti(e){return{type:1,lower:e,upper:e}}class ei{get Collection(){return this._ctx.table.db.Collection}between(t,n,i,r){i=i!==!1,r=r===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(i||r)&&(!i||!r)?ee(this):new this.Collection(this,()=>Kt(t,n,!i,!r))}catch{return kt(this,Tt)}}equals(t){return t==null?kt(this,Tt):new this.Collection(this,()=>ti(t))}above(t){return t==null?kt(this,Tt):new this.Collection(this,()=>Kt(t,void 0,!0))}aboveOrEqual(t){return t==null?kt(this,Tt):new this.Collection(this,()=>Kt(t,void 0,!1))}below(t){return t==null?kt(this,Tt):new this.Collection(this,()=>Kt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?kt(this,Tt):new this.Collection(this,()=>Kt(void 0,t))}startsWith(t){return typeof t!="string"?kt(this,Xr):this.between(t,t+Gt,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Le(this,(n,i)=>n.indexOf(i[0])===0,[t],Gt)}equalsIgnoreCase(t){return Le(this,(n,i)=>n===i[0],[t],"")}anyOfIgnoreCase(){var t=Rt.apply(re,arguments);return t.length===0?ee(this):Le(this,(n,i)=>i.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Rt.apply(re,arguments);return t.length===0?ee(this):Le(this,(n,i)=>i.some(r=>n.indexOf(r)===0),t,Gt)}anyOf(){const t=Rt.apply(re,arguments);let n=this._cmp;try{t.sort(n)}catch{return kt(this,Tt)}if(t.length===0)return ee(this);const i=new this.Collection(this,()=>Kt(t[0],t[t.length-1]));i._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let r=0;return i._addAlgorithm((s,a,o)=>{const u=s.key;for(;n(u,t[r])>0;)if(++r,r===t.length)return a(o),!1;return n(u,t[r])===0||(a(()=>{s.continue(t[r])}),!1)}),i}notEqual(t){return this.inAnyRange([[jn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=Rt.apply(re,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return kt(this,Tt)}const n=t.reduce((i,r)=>i?i.concat([[i[i.length-1][1],r]]):[[jn,r]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const i=this._cmp,r=this._ascending,s=this._descending,a=this._min,o=this._max;if(t.length===0)return ee(this);if(!t.every(_=>_[0]!==void 0&&_[1]!==void 0&&r(_[0],_[1])<=0))return kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",nt.InvalidArgument);const u=!n||n.includeLowers!==!1,g=n&&n.includeUppers===!0;let y,m=r;function p(_,k){return m(_[0],k[0])}try{y=t.reduce(function(_,k){let C=0,E=_.length;for(;C<E;++C){const I=_[C];if(i(k[0],I[1])<0&&i(k[1],I[0])>0){I[0]=a(I[0],k[0]),I[1]=o(I[1],k[1]);break}}return C===E&&_.push(k),_},[]),y.sort(p)}catch{return kt(this,Tt)}let h=0;const v=g?_=>r(_,y[h][1])>0:_=>r(_,y[h][1])>=0,c=u?_=>s(_,y[h][0])>0:_=>s(_,y[h][0])>=0;let b=v;const d=new this.Collection(this,()=>Kt(y[0][0],y[y.length-1][1],!u,!g));return d._ondirectionchange=_=>{_==="next"?(b=v,m=r):(b=c,m=s),y.sort(p)},d._addAlgorithm((_,k,C)=>{for(var E=_.key;b(E);)if(++h,h===y.length)return k(C),!1;return!!function(I){return!v(I)&&!c(I)}(E)||(this._cmp(E,y[h][1])===0||this._cmp(E,y[h][0])===0||k(()=>{m===r?_.continue(y[h][0]):_.continue(y[h][1])}),!1)}),d}startsWithAnyOf(){const t=Rt.apply(re,arguments);return t.every(n=>typeof n=="string")?t.length===0?ee(this):this.inAnyRange(t.map(n=>[n,n+Gt])):kt(this,"startsWithAnyOf() only works with strings")}}function It(e){return ct(function(t){return Ee(t),e(t.target.error),!1})}function Ee(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Se="storagemutated",Lt="x-storagemutated-1",Zt=be(null,Se);class rs{_lock(){return pe(!X.global),++this._reculock,this._reculock!==1||X.global||(X.lockOwnerFor=this),this}_unlock(){if(pe(!X.global),--this._reculock==0)for(X.global||(X.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{le(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&X.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,i=this.db._state.dbOpenError;if(pe(!this.idbtrans),!t&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new nt.DatabaseClosed(i);case"MissingAPIError":throw new nt.MissingAPI(i.message,i);default:throw new nt.OpenFailed(i)}if(!this.active)throw new nt.TransactionInactive;return pe(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ct(r=>{Ee(r),this._reject(t.error)}),t.onabort=ct(r=>{Ee(r),this.active&&this._reject(new nt.Abort(t.error)),this.active=!1,this.on("abort").fire(r)}),t.oncomplete=ct(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Zt.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,i){if(t==="readwrite"&&this.mode!=="readwrite")return mt(new nt.ReadOnly("Transaction is readonly"));if(!this.active)return mt(new nt.TransactionInactive);if(this._locked())return new Y((s,a)=>{this._blockedFuncs.push([()=>{this._promise(t,n,i).then(s,a)},X])});if(i)return Mt(()=>{var s=new Y((a,o)=>{this._lock();const u=n(a,o,this);u&&u.then&&u.then(a,o)});return s.finally(()=>this._unlock()),s._lib=!0,s});var r=new Y((s,a)=>{var o=n(s,a,this);o&&o.then&&o.then(s,a)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const i=Y.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>i);else{n._waitingFor=i,n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(r.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new Y((a,o)=>{i.then(u=>n._waitingQueue.push(ct(a.bind(null,u))),u=>n._waitingQueue.push(ct(o.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new nt.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(xt(n,t))return n[t];const i=this.schema[t];if(!i)throw new nt.NotFound("Table "+t+" not part of transaction");const r=new this.db.Table(t,i,this);return r.core=this.db.core.table(t),n[t]=r,r}}function Fn(e,t,n,i,r,s,a){return{name:e,keyPath:t,unique:n,multi:i,auto:r,compound:s,src:(n&&!a?"&":"")+(i?"*":"")+(r?"++":"")+ni(t)}}function ni(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ri(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Rr(n,i=>[i.name,i])}}let Ce=e=>{try{return e.only([[]]),Ce=()=>[[]],[[]]}catch{return Ce=()=>Gt,Gt}};function Nn(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?i=>i[t]:i=>Ft(i,t)}(e):t=>Ft(t,e)}function br(e){return[].slice.call(e)}let is=0;function ve(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function ss(e,t,n){function i(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:g,upper:y,lowerOpen:m,upperOpen:p}=u;return g===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(g,!!m):t.bound(g,y,!!m,!!p)}const{schema:r,hasGetAll:s}=function(u,g){const y=br(u.objectStoreNames);return{schema:{name:u.name,tables:y.map(m=>g.objectStore(m)).map(m=>{const{keyPath:p,autoIncrement:h}=m,v=bt(p),c=p==null,b={},d={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:c,compound:v,keyPath:p,autoIncrement:h,unique:!0,extractKey:Nn(p)},indexes:br(m.indexNames).map(_=>m.index(_)).map(_=>{const{name:k,unique:C,multiEntry:E,keyPath:I}=_,A={name:k,compound:bt(I),keyPath:I,unique:C,multiEntry:E,extractKey:Nn(I)};return b[ve(I)]=A,A}),getIndexByKeyPath:_=>b[ve(_)]};return b[":id"]=d.primaryKey,p!=null&&(b[ve(p)]=d.primaryKey),d})},hasGetAll:y.length>0&&"getAll"in g.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=r.tables.map(u=>function(g){const y=g.name;return{name:y,schema:g,mutate:function({trans:m,type:p,keys:h,values:v,range:c}){return new Promise((b,d)=>{b=ct(b);const _=m.objectStore(y),k=_.keyPath==null,C=p==="put"||p==="add";if(!C&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:E}=h||v||{length:1};if(h&&v&&h.length!==v.length)throw new Error("Given keys array must have same length as given values array.");if(E===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let I;const A=[],j=[];let O=0;const U=S=>{++O,Ee(S)};if(p==="deleteRange"){if(c.type===4)return b({numFailures:O,failures:j,results:[],lastResult:void 0});c.type===3?A.push(I=_.clear()):A.push(I=_.delete(i(c)))}else{const[S,R]=C?k?[v,h]:[v,null]:[h,null];if(C)for(let f=0;f<E;++f)A.push(I=R&&R[f]!==void 0?_[p](S[f],R[f]):_[p](S[f])),I.onerror=U;else for(let f=0;f<E;++f)A.push(I=_[p](S[f])),I.onerror=U}const H=S=>{const R=S.target.result;A.forEach((f,F)=>f.error!=null&&(j[F]=f.error)),b({numFailures:O,failures:j,results:p==="delete"?h:A.map(f=>f.result),lastResult:R})};I.onerror=S=>{U(S),H(S)},I.onsuccess=H})},getMany:({trans:m,keys:p})=>new Promise((h,v)=>{h=ct(h);const c=m.objectStore(y),b=p.length,d=new Array(b);let _,k=0,C=0;const E=A=>{const j=A.target;d[j._pos]=j.result,++C===k&&h(d)},I=It(v);for(let A=0;A<b;++A)p[A]!=null&&(_=c.get(p[A]),_._pos=A,_.onsuccess=E,_.onerror=I,++k);k===0&&h(d)}),get:({trans:m,key:p})=>new Promise((h,v)=>{h=ct(h);const c=m.objectStore(y).get(p);c.onsuccess=b=>h(b.target.result),c.onerror=It(v)}),query:function(m){return p=>new Promise((h,v)=>{h=ct(h);const{trans:c,values:b,limit:d,query:_}=p,k=d===1/0?void 0:d,{index:C,range:E}=_,I=c.objectStore(y),A=C.isPrimaryKey?I:I.index(C.name),j=i(E);if(d===0)return h({result:[]});if(m){const O=b?A.getAll(j,k):A.getAllKeys(j,k);O.onsuccess=U=>h({result:U.target.result}),O.onerror=It(v)}else{let O=0;const U=b||!("openKeyCursor"in A)?A.openCursor(j):A.openKeyCursor(j),H=[];U.onsuccess=S=>{const R=U.result;return R?(H.push(b?R.value:R.primaryKey),++O===d?h({result:H}):void R.continue()):h({result:H})},U.onerror=It(v)}})}(s),openCursor:function({trans:m,values:p,query:h,reverse:v,unique:c}){return new Promise((b,d)=>{b=ct(b);const{index:_,range:k}=h,C=m.objectStore(y),E=_.isPrimaryKey?C:C.index(_.name),I=v?c?"prevunique":"prev":c?"nextunique":"next",A=p||!("openKeyCursor"in E)?E.openCursor(i(k),I):E.openKeyCursor(i(k),I);A.onerror=It(d),A.onsuccess=ct(j=>{const O=A.result;if(!O)return void b(null);O.___id=++is,O.done=!1;const U=O.continue.bind(O);let H=O.continuePrimaryKey;H&&(H=H.bind(O));const S=O.advance.bind(O),R=()=>{throw new Error("Cursor not stopped")};O.trans=m,O.stop=O.continue=O.continuePrimaryKey=O.advance=()=>{throw new Error("Cursor not started")},O.fail=ct(d),O.next=function(){let f=1;return this.start(()=>f--?this.continue():this.stop()).then(()=>this)},O.start=f=>{const F=new Promise((K,rt)=>{K=ct(K),A.onerror=It(rt),O.fail=rt,O.stop=W=>{O.stop=O.continue=O.continuePrimaryKey=O.advance=R,K(W)}}),Q=()=>{if(A.result)try{f()}catch(K){O.fail(K)}else O.done=!0,O.start=()=>{throw new Error("Cursor behind last entry")},O.stop()};return A.onsuccess=ct(K=>{A.onsuccess=Q,Q()}),O.continue=U,O.continuePrimaryKey=H,O.advance=S,Q(),F},b(O)},d)})},count({query:m,trans:p}){const{index:h,range:v}=m;return new Promise((c,b)=>{const d=p.objectStore(y),_=h.isPrimaryKey?d:d.index(h.name),k=i(v),C=k?_.count(k):_.count();C.onsuccess=ct(E=>c(E.target.result)),C.onerror=It(b)})}}}(u)),o={};return a.forEach(u=>o[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!o[u])throw new Error(`Table '${u}' not found`);return o[u]},MIN_KEY:-1/0,MAX_KEY:Ce(t),schema:r}}function Kn({_novip:e},t){const n=t.db,i=function(r,s,{IDBKeyRange:a,indexedDB:o},u){return{dbcore:function(y,m){return m.reduce((p,{create:h})=>({...p,...h(p)}),y)}(ss(s,a,u),r.dbcore)}}(e._middlewares,n,e._deps,t);e.core=i.dbcore,e.tables.forEach(r=>{const s=r.name;e.core.schema.tables.some(a=>a.name===s)&&(r.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=r.core))})}function on({_novip:e},t,n,i){n.forEach(r=>{const s=i[r];t.forEach(a=>{const o=$n(a,r);(!o||"value"in o&&o.value===void 0)&&(a===e.Transaction.prototype||a instanceof e.Transaction?jt(a,r,{get(){return this.table(r)},set(u){Pr(this,r,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):a[r]=new e.Table(r,s))})})}function Un({_novip:e},t){t.forEach(n=>{for(let i in n)n[i]instanceof e.Table&&delete n[i]})}function as(e,t){return e._cfg.version-t._cfg.version}function os(e,t,n,i){const r=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,r);s.create(n),s._completion.catch(i);const a=s._reject.bind(s),o=X.transless||X;Mt(()=>{X.trans=s,X.transless=o,t===0?(pt(r).forEach(u=>{vn(n,u,r[u].primKey,r[u].indexes)}),Kn(e,n),Y.follow(()=>e.on.populate.fire(s)).catch(a)):function({_novip:u},g,y,m){const p=[],h=u._versions;let v=u._dbSchema=Mn(u,u.idbdb,m),c=!1;const b=h.filter(_=>_._cfg.version>=g);function d(){return p.length?Y.resolve(p.shift()(y.idbtrans)).then(d):Y.resolve()}return b.forEach(_=>{p.push(()=>{const k=v,C=_._cfg.dbschema;Wn(u,k,m),Wn(u,C,m),v=u._dbSchema=C;const E=ii(k,C);E.add.forEach(A=>{vn(m,A[0],A[1].primKey,A[1].indexes)}),E.change.forEach(A=>{if(A.recreate)throw new nt.Upgrade("Not yet support for changing primary key");{const j=m.objectStore(A.name);A.add.forEach(O=>Ln(j,O)),A.change.forEach(O=>{j.deleteIndex(O.name),Ln(j,O)}),A.del.forEach(O=>j.deleteIndex(O))}});const I=_._cfg.contentUpgrade;if(I&&_._cfg.version>g){Kn(u,m),y._memoizedTables={},c=!0;let A=Dr(C);E.del.forEach(H=>{A[H]=k[H]}),Un(u,[u.Transaction.prototype]),on(u,[u.Transaction.prototype],pt(A),A),y.schema=A;const j=Yn(I);let O;j&&ue();const U=Y.follow(()=>{if(O=I(y),O&&j){var H=Nt.bind(null,null);O.then(H,H)}});return O&&typeof O.then=="function"?Y.resolve(O):U.then(()=>O)}}),p.push(k=>{(!c||!Yi)&&function(C,E){[].slice.call(E.db.objectStoreNames).forEach(I=>C[I]==null&&E.db.deleteObjectStore(I))}(_._cfg.dbschema,k),Un(u,[u.Transaction.prototype]),on(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),y.schema=u._dbSchema})}),d().then(()=>{var _,k;k=m,pt(_=v).forEach(C=>{k.db.objectStoreNames.contains(C)||vn(k,C,_[C].primKey,_[C].indexes)})})}(e,t,s,n).catch(a)})}function ii(e,t){const n={del:[],add:[],change:[]};let i;for(i in e)t[i]||n.del.push(i);for(i in t){const r=e[i],s=t[i];if(r){const a={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!ln)a.recreate=!0,n.change.push(a);else{const o=r.idxByName,u=s.idxByName;let g;for(g in o)u[g]||a.del.push(g);for(g in u){const y=o[g],m=u[g];y?y.src!==m.src&&a.change.push(m):a.add.push(m)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([i,s])}return n}function vn(e,t,n,i){const r=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(s=>Ln(r,s)),r}function Ln(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Mn(e,t,n){const i={};return tn(t.objectStoreNames,0).forEach(r=>{const s=n.objectStore(r);let a=s.keyPath;const o=Fn(ni(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),u=[];for(let y=0;y<s.indexNames.length;++y){const m=s.index(s.indexNames[y]);a=m.keyPath;var g=Fn(m.name,a,!!m.unique,!!m.multiEntry,!1,a&&typeof a!="string",!1);u.push(g)}i[r]=ri(r,o,u)}),i}function Wn({_novip:e},t,n){const i=n.db.objectStoreNames;for(let r=0;r<i.length;++r){const s=i[r],a=n.objectStore(s);e._hasGetAll="getAll"in a;for(let o=0;o<a.indexNames.length;++o){const u=a.indexNames[o],g=a.index(u).keyPath,y=typeof g=="string"?g:"["+tn(g).join("+")+"]";if(t[s]){const m=t[s].idxByName[y];m&&(m.name=u,delete t[s].idxByName[y],t[s].idxByName[u]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&lt.WorkerGlobalScope&&lt instanceof lt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class us{_parseStoresSpec(t,n){pt(t).forEach(i=>{if(t[i]!==null){var r=t[i].split(",").map((a,o)=>{const u=(a=a.trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Fn(u,g||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),bt(g),o===0)}),s=r.shift();if(s.multi)throw new nt.Schema("Primary key cannot be multi-valued");r.forEach(a=>{if(a.auto)throw new nt.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new nt.Schema("Index must have a name and cannot be an empty string")}),n[i]=ri(i,s,r)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?wt(this._cfg.storesSource,t):t;const i=n._versions,r={};let s={};return i.forEach(a=>{wt(r,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(r,s)}),n._dbSchema=s,Un(n,[n._allTables,n,n.Transaction.prototype]),on(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],pt(s),s),n._storeNames=pt(s),this}upgrade(t){return this._cfg.contentUpgrade=Qn(this._cfg.contentUpgrade||ot,t),this}}function rr(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Yt(cn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ir(e){return e&&typeof e.databases=="function"}function Zn(e){return Mt(function(){return X.letThrough=!0,e()})}function ls(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function cs(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?mt(t.dbOpenError):e);zt&&(t.openCanceller._stackHolder=Qt()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const i=t.openCanceller;function r(){if(t.openCanceller!==i)throw new nt.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,a=null,o=!1;return Y.race([i,(typeof navigator>"u"?Y.resolve():ls()).then(()=>new Y((u,g)=>{if(r(),!n)throw new nt.MissingAPI;const y=e.name,m=t.autoSchema?n.open(y):n.open(y,Math.round(10*e.verno));if(!m)throw new nt.MissingAPI;m.onerror=It(g),m.onblocked=ct(e._fireOnBlocked),m.onupgradeneeded=ct(p=>{if(a=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=Ee,a.abort(),m.result.close();const v=n.deleteDatabase(y);v.onsuccess=v.onerror=ct(()=>{g(new nt.NoSuchDatabase(`Database ${y} doesnt exist`))})}else{a.onerror=It(g);var h=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;o=h<1,e._novip.idbdb=m.result,os(e,h/10,a,g)}},g),m.onsuccess=ct(()=>{a=null;const p=e._novip.idbdb=m.result,h=tn(p.objectStoreNames);if(h.length>0)try{const c=p.transaction((v=h).length===1?v[0]:v,"readonly");t.autoSchema?function({_novip:b},d,_){b.verno=d.version/10;const k=b._dbSchema=Mn(0,d,_);b._storeNames=tn(d.objectStoreNames,0),on(b,[b._allTables],pt(k),k)}(e,p,c):(Wn(e,e._dbSchema,c),function(b,d){const _=ii(Mn(0,b.idbdb,d),b._dbSchema);return!(_.add.length||_.change.some(k=>k.add.length||k.change.length))}(e,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Kn(e,c)}catch{}var v;_e.push(e),p.onversionchange=ct(c=>{t.vcFired=!0,e.on("versionchange").fire(c)}),p.onclose=ct(c=>{e.on("close").fire(c)}),o&&function({indexedDB:c,IDBKeyRange:b},d){!ir(c)&&d!==cn&&rr(c,b).put({name:d}).catch(ot)}(e._deps,y),u()},g)}))]).then(()=>(r(),t.onReadyBeingFired=[],Y.resolve(Zn(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let g=t.onReadyBeingFired.reduce(Qn,ot);return t.onReadyBeingFired=[],Y.resolve(Zn(()=>g(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{a&&a.abort()}catch{}return i===t.openCanceller&&e._close(),mt(u)}).finally(()=>{t.openComplete=!0,s()})}function qn(e){var t=s=>e.next(s),n=r(t),i=r(s=>e.throw(s));function r(s){return a=>{var o=s(a),u=o.value;return o.done?u:u&&typeof u.then=="function"?u.then(n,i):bt(u)?Promise.all(u).then(n,i):n(u)}}return r(t)()}function hs(e,t,n){var i=arguments.length;if(i<2)throw new nt.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];return n=r.pop(),[e,jr(r),n]}function si(e,t,n,i,r){return Y.resolve().then(()=>{const s=X.transless||X,a=e._createTransaction(t,n,e._dbSchema,i),o={trans:a,transless:s};if(i)a.idbtrans=i.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(m){return m.name===Jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>si(e,t,n,null,r))):mt(m)}const u=Yn(r);let g;u&&ue();const y=Y.follow(()=>{if(g=r.call(a,a),g)if(u){var m=Nt.bind(null,null);g.then(m,m)}else typeof g.next=="function"&&typeof g.throw=="function"&&(g=qn(g))},o);return(g&&typeof g.then=="function"?Y.resolve(g).then(m=>a.active?m:mt(new nt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):y.then(()=>g)).then(m=>(i&&a._resolve(),a._completion.then(()=>m))).catch(m=>(a._reject(m),mt(m)))})}function Me(e,t,n){const i=bt(e)?e.slice():[e];for(let r=0;r<n;++r)i.push(t);return i}const fs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:i}=n,r={},s=[];function a(y,m,p){const h=ve(y),v=r[h]=r[h]||[],c=y==null?0:typeof y=="string"?1:y.length,b=m>0,d={...p,isVirtual:b,keyTail:m,keyLength:c,extractKey:Nn(y),unique:!b&&p.unique};return v.push(d),d.isPrimaryKey||s.push(d),c>1&&a(c===2?y[0]:y.slice(0,c-1),m+1,p),v.sort((_,k)=>_.keyTail-k.keyTail),d}const o=a(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[o];for(const y of i.indexes)a(y.keyPath,0,y);function u(y){const m=y.query.index;return m.isVirtual?{...y,query:{index:m,range:(p=y.query.range,h=m.keyTail,{type:p.type===1?2:p.type,lower:Me(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,h),lowerOpen:!0,upper:Me(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,h),upperOpen:!0})}}:y;var p,h}return{...n,schema:{...i,primaryKey:o,indexes:s,getIndexByKeyPath:function(y){const m=r[ve(y)];return m&&m[0]}},count:y=>n.count(u(y)),query:y=>n.query(u(y)),openCursor(y){const{keyTail:m,isVirtual:p,keyLength:h}=y.query.index;return p?n.openCursor(u(y)).then(v=>v&&function(c){return Object.create(c,{continue:{value:function(d){d!=null?c.continue(Me(d,y.reverse?e.MAX_KEY:e.MIN_KEY,m)):y.unique?c.continue(c.key.slice(0,h).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,m)):c.continue()}},continuePrimaryKey:{value(d,_){c.continuePrimaryKey(Me(d,e.MAX_KEY,m),_)}},primaryKey:{get:()=>c.primaryKey},key:{get(){const d=c.key;return h===1?d[0]:d.slice(0,h)}},value:{get:()=>c.value}})}(v)):n.openCursor(y)}}}}}};function sr(e,t,n,i){return n=n||{},i=i||"",pt(e).forEach(r=>{if(xt(t,r)){var s=e[r],a=t[r];if(typeof s=="object"&&typeof a=="object"&&s&&a){const o=En(s);o!==En(a)?n[i+r]=t[r]:o==="Object"?sr(s,a,n,i+r+"."):s!==a&&(n[i+r]=t[r])}else s!==a&&(n[i+r]=t[r])}else n[i+r]=void 0}),pt(t).forEach(r=>{xt(e,r)||(n[i+r]=t[r])}),n}const ds={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:i}=n.schema;return{...n,mutate(s){const a=X.trans,{deleting:o,creating:u,updating:g}=a.table(t).hook;switch(s.type){case"add":if(u.fire===ot)break;return a._promise("readwrite",()=>y(s),!0);case"put":if(u.fire===ot&&g.fire===ot)break;return a._promise("readwrite",()=>y(s),!0);case"delete":if(o.fire===ot)break;return a._promise("readwrite",()=>y(s),!0);case"deleteRange":if(o.fire===ot)break;return a._promise("readwrite",()=>function(p){return m(p.trans,p.range,1e4)}(s),!0)}return n.mutate(s);function y(p){const h=X.trans,v=p.keys||function(c,b){return b.type==="delete"?b.keys:b.keys||b.values.map(c.extractKey)}(i,p);if(!v)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:v}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(c,b,d){return b.type==="add"?Promise.resolve([]):c.getMany({trans:b.trans,keys:d,cache:"immutable"})}(n,p,v).then(c=>{const b=v.map((d,_)=>{const k=c[_],C={onerror:null,onsuccess:null};if(p.type==="delete")o.fire.call(C,d,k,h);else if(p.type==="add"||k===void 0){const E=u.fire.call(C,d,p.values[_],h);d==null&&E!=null&&(d=E,p.keys[_]=d,i.outbound||Ct(p.values[_],i.keyPath,d))}else{const E=sr(k,p.values[_]),I=g.fire.call(C,E,d,k,h);if(I){const A=p.values[_];Object.keys(I).forEach(j=>{xt(A,j)?A[j]=I[j]:Ct(A,j,I[j])})}}return C});return n.mutate(p).then(({failures:d,results:_,numFailures:k,lastResult:C})=>{for(let E=0;E<v.length;++E){const I=_?_[E]:v[E],A=b[E];I==null?A.onerror&&A.onerror(d[E]):A.onsuccess&&A.onsuccess(p.type==="put"&&c[E]?p.values[E]:I)}return{failures:d,results:_,numFailures:k,lastResult:C}}).catch(d=>(b.forEach(_=>_.onerror&&_.onerror(d)),Promise.reject(d)))})}function m(p,h,v){return n.query({trans:p,values:!1,query:{index:i,range:h},limit:v}).then(({result:c})=>y({type:"delete",keys:c,trans:p}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):c.length<v?{failures:[],numFailures:0,lastResult:void 0}:m(p,{...h,lower:c[c.length-1],lowerOpen:!0},v)))}}}}})};function ai(e,t,n){try{if(!t||t.keys.length<e.length)return null;const i=[];for(let r=0,s=0;r<t.keys.length&&s<e.length;++r)vt(t.keys[r],e[s])===0&&(i.push(n?Oe(t.values[r]):t.values[r]),++s);return i.length===e.length?i:null}catch{return null}}const ps={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:i=>{if(!i.cache)return n.getMany(i);const r=ai(i.keys,i.trans._cache,i.cache==="clone");return r?Y.resolve(r):n.getMany(i).then(s=>(i.trans._cache={keys:i.keys,values:i.cache==="clone"?Oe(s):s},s))},mutate:i=>(i.type!=="add"&&(i.trans._cache=null),n.mutate(i))}}})};function ar(e){return!("from"in e)}const Bt=function(e,t){if(!this){const n=new Bt;return e&&"d"in e&&wt(n,e),n}wt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Ae(e,t,n){const i=vt(t,n);if(isNaN(i))return;if(i>0)throw RangeError();if(ar(e))return wt(e,{from:t,to:n,d:1});const r=e.l,s=e.r;if(vt(n,e.from)<0)return r?Ae(r,t,n):e.l={from:t,to:n,d:1,l:null,r:null},vr(e);if(vt(t,e.to)>0)return s?Ae(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},vr(e);vt(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),vt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;r&&!e.l&&un(e,r),s&&a&&un(e,s)}function un(e,t){ar(t)||function n(i,{from:r,to:s,l:a,r:o}){Ae(i,r,s),a&&n(i,a),o&&n(i,o)}(e,t)}function ms(e,t){const n=Hn(t);let i=n.next();if(i.done)return!1;let r=i.value;const s=Hn(e);let a=s.next(r.from),o=a.value;for(;!i.done&&!a.done;){if(vt(o.from,r.to)<=0&&vt(o.to,r.from)>=0)return!0;vt(r.from,o.from)<0?r=(i=n.next(o.from)).value:o=(a=s.next(r.from)).value}return!1}function Hn(e){let t=ar(e)?null:{s:0,n:e};return{next(n){const i=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&vt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||vt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function vr(e){var t,n;const i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),r=i>1?"r":i<-1?"l":"";if(r){const s=r==="r"?"l":"r",a={...e},o=e[r];e.from=o.from,e.to=o.to,e[r]=o[r],a[r]=o[s],e[s]=a,a.d=wr(a)}e.d=wr(e)}function wr({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}oe(Bt.prototype,{add(e){return un(this,e),this},addKey(e){return Ae(this,e,e),this},addKeys(e){return e.forEach(t=>Ae(this,t,t)),this},[Sn](){return Hn(this)}});const ys={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Bt(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const r=e.table(i),{schema:s}=r,{primaryKey:a}=s,{extractKey:o,outbound:u}=a,g={...r,mutate:p=>{const h=p.trans,v=h.mutatedParts||(h.mutatedParts={}),c=I=>{const A=`idb://${t}/${i}/${I}`;return v[A]||(v[A]=new Bt)},b=c(""),d=c(":dels"),{type:_}=p;let[k,C]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const E=p.trans._cache;return r.mutate(p).then(I=>{if(bt(k)){_!=="delete"&&(k=I.results),b.addKeys(k);const A=ai(k,E);A||_==="add"||d.addKeys(k),(A||C)&&function(j,O,U,H){function S(R){const f=j(R.name||"");function F(K){return K!=null?R.extractKey(K):null}const Q=K=>R.multiEntry&&bt(K)?K.forEach(rt=>f.addKey(rt)):f.addKey(K);(U||H).forEach((K,rt)=>{const W=U&&F(U[rt]),tt=H&&F(H[rt]);vt(W,tt)!==0&&(W!=null&&Q(W),tt!=null&&Q(tt))})}O.indexes.forEach(S)}(c,s,A,C)}else if(k){const A={from:k.lower,to:k.upper};d.add(A),b.add(A)}else b.add(n),d.add(n),s.indexes.forEach(A=>c(A.name).add(n));return I})}},y=({query:{index:p,range:h}})=>{var v,c;return[p,new Bt((v=h.lower)!==null&&v!==void 0?v:e.MIN_KEY,(c=h.upper)!==null&&c!==void 0?c:e.MAX_KEY)]},m={get:p=>[a,new Bt(p.key)],getMany:p=>[a,new Bt().addKeys(p.keys)],count:y,query:y,openCursor:y};return pt(m).forEach(p=>{g[p]=function(h){const{subscr:v}=X;if(v){const c=C=>{const E=`idb://${t}/${i}/${C}`;return v[E]||(v[E]=new Bt)},b=c(""),d=c(":dels"),[_,k]=m[p](h);if(c(_.name||"").add(k),!_.isPrimaryKey){if(p!=="count"){const C=p==="query"&&u&&h.values&&r.query({...h,values:!1});return r[p].apply(this,arguments).then(E=>{if(p==="query"){if(u&&h.values)return C.then(({result:A})=>(b.addKeys(A),E));const I=h.values?E.result.map(o):E.result;h.values?b.addKeys(I):d.addKeys(I)}else if(p==="openCursor"){const I=E,A=h.values;return I&&Object.create(I,{key:{get:()=>(d.addKey(I.primaryKey),I.key)},primaryKey:{get(){const j=I.primaryKey;return d.addKey(j),j}},value:{get:()=>(A&&b.addKey(I.primaryKey),I.value)}})}return E})}d.add(n)}}return r[p].apply(this,arguments)}}),g}}}};class Yt{constructor(t,n){this._middlewares={},this.verno=0;const i=Yt.dependencies;this._options=n={addons:Yt.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:r}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ot,dbReadyPromise:null,cancelOpen:ot,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;s.dbReadyPromise=new Y(o=>{s.dbReadyResolve=o}),s.openCanceller=new Y((o,u)=>{s.cancelOpen=u}),this._state=s,this.name=t,this.on=be(this,"populate","blocked","versionchange","close",{ready:[Qn,ot]}),this.on.ready.subscribe=Tr(this.on.ready.subscribe,o=>(u,g)=>{Yt.vip(()=>{const y=this._state;if(y.openComplete)y.dbOpenError||Y.resolve().then(u),g&&o(u);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(u),g&&o(u);else{o(u);const m=this;g||o(function p(){m.on.ready.unsubscribe(u),m.on.ready.unsubscribe(p)})}})}),this.Collection=(a=this,de(Qi.prototype,function(o,u){this.db=a;let g=Qr,y=null;if(u)try{g=u()}catch(v){y=v}const m=o._ctx,p=m.table,h=p.hook.reading.fire;this._ctx={table:p,index:m.index,isPrimKey:!m.index||p.schema.primKey.keyPath&&m.index===p.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:y,or:m.or,valueMapper:h!==ke?h:null}})),this.Table=function(o){return de(Ji.prototype,function(u,g,y){this.db=o,this._tx=y,this.name=u,this.schema=g,this.hook=o._allTables[u]?o._allTables[u].hook:be(null,{creating:[Ui,ot],reading:[Ki,ke],updating:[Mi,ot],deleting:[Li,ot]})})}(this),this.Transaction=function(o){return de(rs.prototype,function(u,g,y,m,p){this.db=o,this.mode=u,this.storeNames=g,this.schema=y,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=be(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Y((h,v)=>{this._resolve=h,this._reject=v}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},h=>{var v=this.active;return this.active=!1,this.on.error.fire(h),this.parent?this.parent._reject(h):v&&this.idbtrans&&this.idbtrans.abort(),mt(h)})})}(this),this.Version=function(o){return de(us.prototype,function(u){this.db=o,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(o){return de(ei.prototype,function(u,g,y){this.db=o,this._ctx={table:u,index:g===":id"?null:g,or:y};const m=o._deps.indexedDB;if(!m)throw new nt.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(p,h)=>m.cmp(h,p),this._max=(p,h)=>m.cmp(p,h)>0?p:h,this._min=(p,h)=>m.cmp(p,h)<0?p:h,this._IDBKeyRange=o._deps.IDBKeyRange})}(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=Ce(n.IDBKeyRange),this._createTransaction=(o,u,g,y)=>new this.Transaction(o,u,g,this._options.chromeTransactionDurability,y),this._fireOnBlocked=o=>{this.on("blocked").fire(o),_e.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(o))},this.use(fs),this.use(ds),this.use(ys),this.use(ps),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(o=>o(this))}version(t){if(isNaN(t)||t<.1)throw new nt.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new nt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var i=n.filter(r=>r._cfg.version===t)[0];return i||(i=new this.Version(t),n.push(i),n.sort(as),i.stores({}),this._state.autoSchema=!1,i)}_whenReady(t){return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?t():new Y((n,i)=>{if(this._state.openComplete)return i(new nt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void i(new nt.DatabaseClosed);this.open().catch(ot)}this._state.dbReadyPromise.then(n,i)}).then(t)}use({stack:t,create:n,level:i,name:r}){r&&this.unuse({stack:t,name:r});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:i??10,name:r}),s.sort((a,o)=>a.level-o.level),this}unuse({stack:t,name:n,create:i}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(r=>i?r.create!==i:!!n&&r.name!==n)),this}open(){return cs(this)}_close(){const t=this._state,n=_e.indexOf(this);if(n>=0&&_e.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new Y(i=>{t.dbReadyResolve=i}),t.openCanceller=new Y((i,r)=>{t.cancelOpen=r})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new nt.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new Y((i,r)=>{const s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=ct(()=>{(function({indexedDB:o,IDBKeyRange:u},g){!ir(o)&&g!==cn&&rr(o,u).delete(g).catch(ot)})(this._deps,this.name),i()}),a.onerror=It(r),a.onblocked=this._fireOnBlocked};if(t)throw new nt.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return pt(this._allTables).map(t=>this._allTables[t])}transaction(){const t=hs.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,i){let r=X.trans;r&&r.db===this&&t.indexOf("!")===-1||(r=null);const s=t.indexOf("?")!==-1;let a,o;t=t.replace("!","").replace("?","");try{if(o=n.map(g=>{var y=g instanceof this.Table?g.name:g;if(typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),t=="r"||t===mn)a=mn;else{if(t!="rw"&&t!=yn)throw new nt.InvalidArgument("Invalid transaction mode: "+t);a=yn}if(r){if(r.mode===mn&&a===yn){if(!s)throw new nt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(g=>{if(r&&r.storeNames.indexOf(g)===-1){if(!s)throw new nt.SubTransaction("Table "+g+" not included in parent transaction.");r=null}}),s&&r&&!r.active&&(r=null)}}catch(g){return r?r._promise(null,(y,m)=>{m(g)}):mt(g)}const u=si.bind(null,this,a,o,r,i);return r?r._promise(a,u,"lock"):X.trans?le(X.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!xt(this._allTables,t))throw new nt.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const gs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class _s{constructor(t){this._subscribe=t}subscribe(t,n,i){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:i})}[gs](){return this}}function oi(e,t){return pt(t).forEach(n=>{un(e[n]||(e[n]=new Bt),t[n])}),e}function bs(e){let t,n=!1;const i=new _s(r=>{const s=Yn(e);let a=!1,o={},u={};const g={get closed(){return a},unsubscribe:()=>{a=!0,Zt.storagemutated.unsubscribe(h)}};r.start&&r.start(g);let y=!1,m=!1;function p(){return pt(u).some(c=>o[c]&&ms(o[c],u[c]))}const h=c=>{oi(o,c),p()&&v()},v=()=>{if(y||a)return;o={};const c={},b=function(d){s&&ue();const _=()=>Mt(e,{subscr:d,trans:null}),k=X.trans?le(X.transless,_):_();return s&&k.then(Nt,Nt),k}(c);m||(Zt(Se,h),m=!0),y=!0,Promise.resolve(b).then(d=>{n=!0,t=d,y=!1,a||(p()?v():(o={},u=c,r.next&&r.next(d)))},d=>{y=!1,n=!1,r.error&&r.error(d),g.unsubscribe()})};return v(),g});return i.hasValue=()=>n,i.getValue=()=>t,i}let Gn;try{Gn={indexedDB:lt.indexedDB||lt.mozIndexedDB||lt.webkitIndexedDB||lt.msIndexedDB,IDBKeyRange:lt.IDBKeyRange||lt.webkitIDBKeyRange}}catch{Gn={indexedDB:null,IDBKeyRange:null}}const qt=Yt;function Ye(e){let t=Dt;try{Dt=!0,Zt.storagemutated.fire(e)}finally{Dt=t}}oe(qt,{...Ze,delete:e=>new qt(e,{addons:[]}).delete(),exists:e=>new qt(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return ir(t)?Promise.resolve(t.databases()).then(i=>i.map(r=>r.name).filter(r=>r!==cn)):rr(t,n).toCollection().primaryKeys()}(qt.dependencies).then(e)}catch{return mt(new nt.MissingAPI)}},defineClass:()=>function(e){wt(this,e)},ignoreTransaction:e=>X.trans?le(X.transless,e):e(),vip:Zn,async:function(e){return function(){try{var t=qn(e.apply(this,arguments));return t&&typeof t.then=="function"?t:Y.resolve(t)}catch(n){return mt(n)}}},spawn:function(e,t,n){try{var i=qn(e.apply(n,t||[]));return i&&typeof i.then=="function"?i:Y.resolve(i)}catch(r){return mt(r)}},currentTransaction:{get:()=>X.trans||null},waitFor:function(e,t){const n=Y.resolve(typeof e=="function"?qt.ignoreTransaction(e):e).timeout(t||6e4);return X.trans?X.trans.waitFor(n):n},Promise:Y,debug:{get:()=>zt,set:e=>{Nr(e,e==="dexie"?()=>!0:Jr)}},derive:ie,extend:wt,props:oe,override:Tr,Events:be,on:Zt,liveQuery:bs,extendObservabilitySet:oi,getByKeyPath:Ft,setByKeyPath:Ct,delByKeyPath:function(e,t){typeof t=="string"?Ct(e,t,void 0):"length"in t&&[].map.call(t,function(n){Ct(e,n,void 0)})},shallowClone:Dr,deepClone:Oe,getObjectDiff:sr,cmp:vt,asap:Br,minKey:jn,addons:[],connections:_e,errnames:Jn,dependencies:Gn,semVer:pr,version:pr.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),qt.maxKey=Ce(qt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Zt(Se,e=>{if(!Dt){let t;ln?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Lt,!0,!0,e)):t=new CustomEvent(Lt,{detail:e}),Dt=!0,dispatchEvent(t),Dt=!1}}),addEventListener(Lt,({detail:e})=>{Dt||Ye(e)}));let Dt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(Lt);typeof e.unref=="function"&&e.unref(),Zt(Se,t=>{Dt||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ye(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Zt(Se,t=>{try{Dt||(typeof localStorage<"u"&&localStorage.setItem(Lt,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Lt,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===Lt){const n=JSON.parse(t.newValue);n&&Ye(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===Lt&&Ye(t.changedParts)})}Y.rejectionMapper=function(e,t){if(!e||e instanceof se||e instanceof TypeError||e instanceof SyntaxError||!e.name||!cr[e.name])return e;var n=new cr[e.name](t||e.message,e);return"stack"in e&&jt(n,"stack",{get:function(){return this.inner.stack}}),n},Nr(zt,Jr);class vs extends Yt{constructor(n){super(n);fn(this,"mapTiles");fn(this,"downloadStatus");this.version(1).stores({mapTiles:"&[z+x+y]",downloadStatus:"&file"}),this.mapTiles=this.table("mapTiles"),this.downloadStatus=this.table("downloadStatus")}}const ws=new vs("tiles");class ks{async download(t){let n=new Oi;const i=`${kn}${t}`;console.log("Loading",i,"base",kn);const r=await fetch(i),s=await(r==null?void 0:r.arrayBuffer());console.log("Size of file",s==null?void 0:s.byteLength);const a=await n.loadAsync(s);for(const o in a.files){const u=o.match(/([0-9]+)\/([0-9]+)\/([0-9]+)\.pbf/);if((u==null?void 0:u.length)!=4)continue;const g=parseInt(u[1]),y=parseInt(u[2]),m=parseInt(u[3]),h=await a.files[o].async("arraybuffer");ws.mapTiles.put({z:g,x:y,y:m,data:h})}return!0}}const xs=new ks;Vn({download:async e=>xs.download(e)});
